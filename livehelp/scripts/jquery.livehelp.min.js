!function(a){"use strict";var b,c=a.Base64,d="2.1.4";"undefined"!=typeof module&&module.exports&&(b=require("buffer").Buffer);var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return 128>b?a:2048>b?g(192|b>>>6)+g(128|63&b):g(224|b>>>12&15)+g(128|b>>>6&63)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|b>>>18&7)+g(128|b>>>12&63)+g(128|b>>>6&63)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[e.charAt(c>>>18),e.charAt(c>>>12&63),b>=2?"=":e.charAt(c>>>6&63),b>=1?"=":e.charAt(63&c)];return d.join("")},l=a.btoa?function(b){return a.btoa(b)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=b?function(a){return new b(a).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(a)},o=function(a){return n(a,!0)},p=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g((c>>>10)+55296)+g((1023&c)+56320);case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(d>>>8&255),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=a.atob?function(b){return a.atob(b)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=b?function(a){return new b(a,"base64").toString()}:function(a){return r(t(a))},v=function(a){return u(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var b=a.Base64;return a.Base64=c,b};if(a.Base64={VERSION:d,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}}(this),function(a,b){"use strict";a.buzz=b()}(this,function(){"use strict";var a=window.AudioContext||window.webkitAudioContext,b={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80,webAudioApi:!1,document:window.document},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),getAudioContext:function(){if(void 0===this.audioCtx)try{this.audioCtx=a?new a:null}catch(b){this.audioCtx=null}return this.audioCtx},sound:function(a,c){function d(a){for(var b=[],c=a.length-1,d=0;c>=d;d++)b.push({start:a.start(d),end:a.end(d)});return b}function e(a){return a.split(".").pop()}c=c||{};var f=c.document||b.defaults.document,g=0,h=[],i={},j=b.isSupported();if(this.load=function(){return j?(this.sound.load(),this):this},this.play=function(){return j?(this.sound.play(),this):this},this.togglePlay=function(){return j?(this.sound.paused?this.sound.play():this.sound.pause(),this):this},this.pause=function(){return j?(this.sound.pause(),this):this},this.isPaused=function(){return j?this.sound.paused:null},this.stop=function(){return j?(this.setTime(0),this.sound.pause(),this):this},this.isEnded=function(){return j?this.sound.ended:null},this.loop=function(){return j?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return j?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return j?(this.sound.muted=!0,this):this},this.unmute=function(){return j?(this.sound.muted=!1,this):this},this.toggleMute=function(){return j?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return j?this.sound.muted:null},this.setVolume=function(a){return j?(0>a&&(a=0),a>100&&(a=100),this.volume=a,this.sound.volume=a/100,this):this},this.getVolume=function(){return j?this.volume:this},this.increaseVolume=function(a){return this.setVolume(this.volume+(a||1))},this.decreaseVolume=function(a){return this.setVolume(this.volume-(a||1))},this.setTime=function(a){if(!j)return this;var b=!0;return this.whenReady(function(){b===!0&&(b=!1,this.sound.currentTime=a)}),this},this.getTime=function(){if(!j)return null;var a=Math.round(100*this.sound.currentTime)/100;return isNaN(a)?b.defaults.placeholder:a},this.setPercent=function(a){return j?this.setTime(b.fromPercent(a,this.sound.duration)):this},this.getPercent=function(){if(!j)return null;var a=Math.round(b.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(a)?b.defaults.placeholder:a},this.setSpeed=function(a){return j?(this.sound.playbackRate=a,this):this},this.getSpeed=function(){return j?this.sound.playbackRate:null},this.getDuration=function(){if(!j)return null;var a=Math.round(100*this.sound.duration)/100;return isNaN(a)?b.defaults.placeholder:a},this.getPlayed=function(){return j?d(this.sound.played):null},this.getBuffered=function(){return j?d(this.sound.buffered):null},this.getSeekable=function(){return j?d(this.sound.seekable):null},this.getErrorCode=function(){return j&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!j)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return j?this.sound.readyState:null},this.getStateMessage=function(){if(!j)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return j?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!j)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(a,b){return j?(this.sound[a]=b,this):this},this.get=function(a){return j?a?this.sound[a]:this.sound:null},this.bind=function(a,b){if(!j)return this;a=a.split(" ");for(var c=this,d=function(a){b.call(c,a)},e=0;e<a.length;e++){var f=a[e],g=f;f=g.split(".")[0],h.push({idx:g,func:d}),this.sound.addEventListener(f,d,!0)}return this},this.unbind=function(a){if(!j)return this;a=a.split(" ");for(var b=0;b<a.length;b++)for(var c=a[b],d=c.split(".")[0],e=0;e<h.length;e++){var f=h[e].idx.split(".");(h[e].idx===c||f[1]&&f[1]===c.replace(".",""))&&(this.sound.removeEventListener(d,h[e].func,!0),h.splice(e,1))}return this},this.bindOnce=function(a,b){if(!j)return this;var c=this;return i[g++]=!1,this.bind(a+"."+g,function(){i[g]||(i[g]=!0,b.call(c)),c.unbind(a+"."+g)}),this},this.trigger=function(a,b){if(!j)return this;a=a.split(" ");for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<h.length;e++){var g=h[e].idx.split(".");if(h[e].idx===d||g[0]&&g[0]===d.replace(".","")){var i=f.createEvent("HTMLEvents");i.initEvent(g[0],!1,!0),i.originalEvent=b,this.sound.dispatchEvent(i)}}return this},this.fadeTo=function(a,c,d){function e(){setTimeout(function(){a>f&&h.volume<a?(h.setVolume(h.volume+=1),e()):f>a&&h.volume>a?(h.setVolume(h.volume-=1),e()):d instanceof Function&&d.apply(h)},g)}if(!j)return this;c instanceof Function?(d=c,c=b.defaults.duration):c=c||b.defaults.duration;var f=this.volume,g=c/Math.abs(f-a),h=this;return this.play(),this.whenReady(function(){e()}),this},this.fadeIn=function(a,b){return j?this.setVolume(0).fadeTo(100,a,b):this},this.fadeOut=function(a,b){return j?this.fadeTo(0,a,b):this},this.fadeWith=function(a,b){return j?(this.fadeOut(b,function(){this.stop()}),a.play().fadeIn(b),this):this},this.whenReady=function(a){if(!j)return null;var b=this;0===this.sound.readyState?this.bind("canplay.buzzwhenready",function(){a.call(b)}):a.call(b)},this.addSource=function(a){var c=this,d=f.createElement("source");return d.src=a,b.types[e(a)]&&(d.type=b.types[e(a)]),this.sound.appendChild(d),d.addEventListener("error",function(a){c.trigger("sourceerror",a)}),d},j&&a){for(var k in b.defaults)b.defaults.hasOwnProperty(k)&&void 0===c[k]&&(c[k]=b.defaults[k]);if(this.sound=f.createElement("audio"),c.webAudioApi){var l=b.getAudioContext();l&&(this.source=l.createMediaElementSource(this.sound),this.source.connect(l.destination))}if(a instanceof Array)for(var m in a)a.hasOwnProperty(m)&&this.addSource(a[m]);else if(c.formats.length)for(var n in c.formats)c.formats.hasOwnProperty(n)&&this.addSource(a+"."+c.formats[n]);else this.addSource(a);c.loop&&this.loop(),c.autoplay&&(this.sound.autoplay="autoplay"),c.preload===!0?this.sound.preload="auto":c.preload===!1?this.sound.preload="none":this.sound.preload=c.preload,this.setVolume(c.volume),b.sounds.push(this)}},group:function(a){function b(){for(var b=c(null,arguments),d=b.shift(),e=0;e<a.length;e++)a[e][d].apply(a[e],b)}function c(a,b){return a instanceof Array?a:Array.prototype.slice.call(b)}a=c(a,arguments),this.getSounds=function(){return a},this.add=function(b){b=c(b,arguments);for(var d=0;d<b.length;d++)a.push(b[d])},this.remove=function(b){b=c(b,arguments);for(var d=0;d<b.length;d++)for(var e=0;e<a.length;e++)if(a[e]===b[d]){a.splice(e,1);break}},this.load=function(){return b("load"),this},this.play=function(){return b("play"),this},this.togglePlay=function(){return b("togglePlay"),this},this.pause=function(a){return b("pause",a),this},this.stop=function(){return b("stop"),this},this.mute=function(){return b("mute"),this},this.unmute=function(){return b("unmute"),this},this.toggleMute=function(){return b("toggleMute"),this},this.setVolume=function(a){return b("setVolume",a),this},this.increaseVolume=function(a){return b("increaseVolume",a),this},this.decreaseVolume=function(a){return b("decreaseVolume",a),this},this.loop=function(){return b("loop"),this},this.unloop=function(){return b("unloop"),this},this.setSpeed=function(a){return b("setSpeed",a),this},this.setTime=function(a){return b("setTime",a),this},this.set=function(a,c){return b("set",a,c),this},this.bind=function(a,c){return b("bind",a,c),this},this.unbind=function(a){return b("unbind",a),this},this.bindOnce=function(a,c){return b("bindOnce",a,c),this},this.trigger=function(a){return b("trigger",a),this},this.fade=function(a,c,d,e){return b("fade",a,c,d,e),this},this.fadeIn=function(a,c){return b("fadeIn",a,c),this},this.fadeOut=function(a,c){return b("fadeOut",a,c),this}},all:function(){return new b.group(b.sounds)},isSupported:function(){return!!b.el.canPlayType},isOGGSupported:function(){return!!b.el.canPlayType&&b.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!b.el.canPlayType&&b.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!b.el.canPlayType&&b.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!b.el.canPlayType&&(b.el.canPlayType("audio/x-m4a;")||b.el.canPlayType("audio/aac;"))},toTimer:function(a,b){var c,d,e;return c=Math.floor(a/3600),c=isNaN(c)?"--":c>=10?c:"0"+c,d=b?Math.floor(a/60%60):Math.floor(a/60),d=isNaN(d)?"--":d>=10?d:"0"+d,e=Math.floor(a%60),e=isNaN(e)?"--":e>=10?e:"0"+e,b?c+":"+d+":"+e:d+":"+e},fromTimer:function(a){var b=a.toString().split(":");return b&&3===b.length&&(a=3600*parseInt(b[0],10)+60*parseInt(b[1],10)+parseInt(b[2],10)),b&&2===b.length&&(a=60*parseInt(b[0],10)+parseInt(b[1],10)),a},toPercent:function(a,b,c){var d=Math.pow(10,c||0);return Math.round(100*a/b*d)/d},fromPercent:function(a,b,c){var d=Math.pow(10,c||0);return Math.round(b/100*a*d)/d}};return b}),function(){function a(a,b){function c(a,b){return k.getComputedStyle||(k.getComputedStyle=function(a,b){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null},this}),k.getComputedStyle(a,null).getPropertyValue(b)}function d(b){var c=b||a.clientHeight,d=f(a);return Math.max(Math.floor(c/d),0)}function e(b){var c=f(a);return c*b}function f(a){var b=c(a,"line-height");return"normal"==b&&(b=1.2*parseInt(c(a,"font-size"))),parseInt(b)}function g(b){return b.lastChild.children&&b.lastChild.children.length>0?g(Array.prototype.slice.call(b.children).pop()):b.lastChild&&b.lastChild.nodeValue&&""!=b.lastChild.nodeValue&&b.lastChild.nodeValue!=l.truncationChar?b.lastChild:(b.lastChild.parentNode.removeChild(b.lastChild),g(a))}function h(b,c){function d(){t=l.splitOnChars.slice(0),u=t[0],r=null,s=null}if(c){var e=b.nodeValue.replace(l.truncationChar,"");if(r||(u=t.length>0?t.shift():"",r=e.split(u)),r.length>1?(s=r.pop(),i(b,r.join(u))):r=null,j&&(b.nodeValue=b.nodeValue.replace(l.truncationChar,""),a.innerHTML=b.nodeValue+" "+j.innerHTML+l.truncationChar),r){if(a.clientHeight<=c){if(!(t.length>=0&&""!=u))return a.innerHTML;i(b,r.join(u)+u+s),r=null}}else""==u&&(i(b,""),b=g(a),d());return l.animate?void setTimeout(function(){h(b,c)},l.animate===!0?10:l.animate):h(b,c)}}function i(a,b){a.nodeValue=b+l.truncationChar}b=b||{};var j,k=window,l={clamp:b.clamp||2,useNativeClamp:"undefined"!=typeof b.useNativeClamp?b.useNativeClamp:!0,splitOnChars:b.splitOnChars||[".","-","\u2013","\u2014"," "],animate:b.animate||!1,truncationChar:b.truncationChar||"\u2026",truncationHTML:b.truncationHTML},m=a.style,n=a.innerHTML,o="undefined"!=typeof a.style.webkitLineClamp,p=l.clamp,q=p.indexOf&&(p.indexOf("px")>-1||p.indexOf("em")>-1);l.truncationHTML&&(j=document.createElement("span"),j.innerHTML=l.truncationHTML);var r,s,t=l.splitOnChars.slice(0),u=t[0];"auto"==p?p=d():q&&(p=d(parseInt(p)));var v;if(o&&l.useNativeClamp)m.overflow="hidden",m.textOverflow="ellipsis",m.webkitBoxOrient="vertical",m.display="-webkit-box",m.webkitLineClamp=p,q&&(m.height=l.clamp+"px");else{var w=e(p);w<=a.clientHeight&&(v=h(g(a),w))}return{original:n,clamped:v}}window.$clamp=a}(),function(a){var b=0;a.fn.extend({open:function(){a(this).trigger("open.bubbletip")},close:function(){a(this).trigger("close.bubbletip")},bubbletip:function(c,d){function f(){var b;o||(o=!0,p&&q.stop(!0,!1),k.calculateOnShow&&h(),k.position.match(/^fixed$/i)?(b={},k.deltaDirection.match(/^up|down$/i)?k.fixedVertical.match(/^top$/i)?(p||q.css("top",parseInt(l.top-l.delta,10)+"px"),b.top=parseInt(l.top,10)+"px"):(p||q.css("bottom",parseInt(l.bottom+l.delta,10)+"px"),b.bottom=parseInt(l.bottom,10)+"px"):k.fixedHorizontal.match(/^right$/i)?(p||(k.fixedVertical.match(/^top$/i)?q.css({top:parseInt(l.top,10)+"px",right:parseInt(l.right-l.delta,10)+"px"}):q.css({bottom:parseInt(l.bottom,10)+"px",right:parseInt(l.right-l.delta,10)+"px"})),b.right=parseInt(l.right,10)+"px"):(p||(k.fixedVertical.match(/^top$/i)?q.css({top:parseInt(l.top,10)+"px",left:parseInt(l.left+l.delta,10)+"px"}):q.css({bottom:parseInt(l.bottom,10)+"px",left:parseInt(l.left+l.delta,10)+"px"})),b.left=parseInt(l.left,10)+"px")):k.positionAt.match(/^element|body$/i)?k.deltaDirection.match(/^up|down$/i)?(p||q.css("top",parseInt(l.top-l.delta,10)+"px"),b={top:l.top+"px"}):(p||q.css("left",parseInt(l.left-l.delta,10)+"px"),b={left:l.left+"px"}):k.deltaDirection.match(/^up|down$/i)?(p||(l.mouseTop=e.pageY+l.top,q.css({top:parseInt(l.mouseTop+l.delta,10)+"px",left:parseInt(e.pageX-q.width()/2,10)+"px"})),b={top:l.mouseTop+"px"}):(p||(l.mouseLeft=e.pageX+l.left,q.css({left:parseInt(l.mouseLeft+l.delta,10)+"px",top:parseInt(e.pageY-q.height()/2,10)+"px"})),b={left:l.left+"px"}),p=!1,q.show(),b=a.extend(b,{opacity:1}),q.animate(b,k.animationDuration,k.animationEasing,function(){k.position.match(/^fixed$/i)?q.css({opacity:"",position:"fixed",top:l.top,left:l.left}):q.css("opacity",""),o=!0}))}function g(){var b;o=!1,p=!0,k.position.match(/^fixed$/i)?(b={},k.deltaDirection.match(/^up|down$/i)?(""!==l.bottom&&(b.bottom=parseInt(l.bottom+l.delta,10)+"px"),""!==l.top&&(b.top=parseInt(l.top-l.delta,10)+"px")):k.fixedHorizontal.match(/^left$/i)?(""!==l.right&&(b.right=parseInt(l.right+l.delta,10)+"px"),""!==l.left&&(b.left=parseInt(l.left+l.delta,10)+"px")):(""!==l.right&&(b.right=parseInt(l.right-l.delta,10)+"px"),""!==l.left&&(b.left=parseInt(l.left-l.delta,10)+"px"))):b=k.positionAt.match(/^element|body$/i)?k.deltaDirection.match(/^up|down$/i)?{top:parseInt(l.top-l.delta,10)+"px"}:{left:parseInt(l.left-l.delta,10)+"px"}:k.deltaDirection.match(/^up|down$/i)?{top:parseInt(l.mouseTop-l.delta,10)+"px"}:{left:parseInt(l.mouseLeft-l.delta,10)+"px"},b=a.extend(b,{opacity:0}),q.animate(b,k.animationDuration,k.animationEasing,function(){q.hide(),p=!1})}function h(){var b;k.position.match(/^fixed$/i)?(b=k.positionAtElement.offset(),k.fixedHorizontal.match(/^left$/i)?l.left=b.left+k.positionAtElement.outerWidth()/2:l.left="",k.fixedHorizontal.match(/^right$/i)?l.right=a(window).width()-b.left-(k.positionAtElement.outerWidth()+q.outerWidth())/2:l.right="",k.fixedVertical.match(/^top$/i)?l.top=b.top-a(window).scrollTop()-q.outerHeight():l.top="",k.fixedVertical.match(/^bottom$/i)?l.bottom=a(window).scrollTop()+a(window).height()-b.top+k.offsetTop:l.bottom="",k.deltaDirection.match(/^left|right$/i)&&(k.fixedVertical.match(/^top$/i)?l.top=l.top+q.outerHeight()/2+k.positionAtElement.outerHeight()/2:l.bottom=l.bottom-q.outerHeight()/2-k.positionAtElement.outerHeight()/2),k.deltaDirection.match(/^left$/i)?k.fixedHorizontal.match(/^left$/i)?l.left=l.left-q.outerWidth():l.right=l.right+q.outerWidth()/2:k.deltaDirection.match(/^right$/i)?k.fixedHorizontal.match(/^left$/i)?l.left=l.left:l.right=l.right-q.outerWidth()/2:k.deltaDirection.match(/^down$/i)?(k.fixedVertical.match(/^top$/i)?l.top=l.top+q.outerHeight()+k.positionAtElement.outerHeight():l.bottom=l.bottom-q.outerHeight()-k.positionAtElement.outerHeight(),k.fixedHorizontal.match(/^left$/i)&&(l.left=l.left-q.outerWidth()/2)):k.fixedHorizontal.match(/^left$/i)&&(l.left=l.left-q.outerWidth()/2),k.deltaDirection.match(/^up|right$/i)&&k.fixedHorizontal.match(/^left|right$/i)?l.delta=k.deltaPosition:l.delta=-k.deltaPosition):k.positionAt.match(/^element$/i)?(b=k.positionAtElement.offset(),k.deltaDirection.match(/^up$/i)?(l.top=b.top+k.offsetTop-q.outerHeight(),l.left=b.left+k.offsetLeft+(k.positionAtElement.outerWidth()-q.outerWidth())/2,l.delta=k.deltaPosition):k.deltaDirection.match(/^down$/i)?(l.top=b.top+k.positionAtElement.outerHeight()+k.offsetTop,l.left=b.left+k.offsetLeft+(k.positionAtElement.outerWidth()-q.outerWidth())/2,l.delta=-k.deltaPosition):k.deltaDirection.match(/^left$/i)?(l.top=b.top+k.offsetTop+(k.positionAtElement.outerHeight()-q.outerHeight())/2,l.left=b.left+k.offsetLeft-q.outerWidth(),l.delta=k.deltaPosition):k.deltaDirection.match(/^right$/i)&&(l.top=b.top+k.offsetTop+(k.positionAtElement.outerHeight()-q.outerHeight())/2,l.left=b.left+k.positionAtElement.outerWidth()+k.offsetLeft,l.delta=-k.deltaPosition)):k.positionAt.match(/^body$/i)?k.deltaDirection.match(/^up|left$/i)?(l.top=k.offsetTop,l.left=k.offsetLeft,l.delta=k.deltaPosition):(k.deltaDirection.match(/^down$/i)?(l.top=parseInt(k.offsetTop+q.outerHeight(),10),l.left=k.offsetLeft):(l.top=k.offsetTop,l.left=parseInt(k.offsetLeft+q.outerWidth(),10)),l.delta=-k.deltaPosition):k.positionAt.match(/^mouse$/i)&&(k.deltaDirection.match(/^up|left$/i)?(k.deltaDirection.match(/^up$/i)?(l.top=-(k.offsetTop+q.outerHeight()),l.left=k.offsetLeft):k.deltaDirection.match(/^left$/i)&&(l.top=k.offsetTop,l.left=-(k.offsetLeft+q.outerWidth())),l.delta=k.deltaPosition):(l.top=k.offsetTop,l.left=k.offsetLeft,l.delta=-k.deltaPosition)),k.position.match(/^fixed$/i)?k.positionAt.match(/^element|body$/i)&&q.css({position:"fixed",left:l.left,top:l.top,right:l.right+"px",bottom:l.bottom+"px"}):k.positionAt.match(/^element|body$/i)&&q.css({position:"absolute",top:l.top+"px",left:l.left+"px"})}if(a(this).data("tip",a(c).get(0).id),a("table.bubbletip #"+a(c).get(0).id).length>0)return this;var i,j,k,l,m,n,o,p,q,r,s,t;return i=a(this),j=a(c),r=b++,k={id:"",position:"absolute",fixedHorizontal:"right",fixedVertical:"bottom",positionAt:"element",positionAtElement:i,offsetTop:0,offsetLeft:0,deltaPosition:30,deltaDirection:"up",animationDuration:250,animationEasing:"swing",delayShow:0,delayHide:500,calculateOnShow:!1},d&&(k=a.extend(k,d)),l={top:0,left:0,right:0,bottom:0,delta:0,mouseTop:0,mouseLeft:0,tipHeight:0},m=null,n=null,o=!1,p=!1,i.data("bubbletip_tips")?i.data("bubbletip_tips",a.merge(i.data("bubbletip_tips"),[[j.get(0).id,r]])):i.data("bubbletip_tips",[[j.get(0).id,r]]),k.fixedVertical.match(/^top|bottom$/i)||(k.positionAt="top"),k.fixedHorizontal.match(/^left|right$/i)||(k.positionAt="left"),k.positionAt.match(/^element|body|mouse$/i)||(k.positionAt="element"),k.deltaDirection.match(/^up|down|left|right$/i)||(k.deltaDirection="up"),k.id.length>0&&(k.id=' id="'+k.id+'"'),k.deltaDirection.match(/^up$/i)?q=a("<table"+k.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td><table class="bt-bottom" cellspacing="0" cellpadding="0"><tr><th></th><td><div></div></td><th></th></tr></table></td><td class="bt-bottomright"></td></tr></tbody></table>'):k.deltaDirection.match(/^down$/i)?q=a("<table"+k.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td><table class="bt-top" cellspacing="0" cellpadding="0"><tr><th></th><td><div></div></td><th></th></tr></table></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>'):k.deltaDirection.match(/^left$/i)?q=a("<table"+k.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left"></td><td class="bt-content"></td><td class="bt-right-tail"><div class="bt-right"></div><div class="bt-right-tail"></div><div class="bt-right"></div></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>'):k.deltaDirection.match(/^right$/i)&&(q=a("<table"+k.id+' class="bubbletip" cellspacing="0" cellpadding="0"><tbody><tr><td class="bt-topleft"></td><td class="bt-top"></td><td class="bt-topright"></td></tr><tr><td class="bt-left-tail"><div class="bt-left"></div><div class="bt-left-tail"></div><div class="bt-left"></div></td><td class="bt-content"></td><td class="bt-right"></td></tr><tr><td class="bt-bottomleft"></td><td class="bt-bottom"></td><td class="bt-bottomright"></td></tr></tbody></table>')),q.appendTo("body"),/msie/.test(navigator.userAgent.toLowerCase())&&!/opera/.test(navigator.userAgent.toLowerCase())&&a("*",q).each(function(){var b=a(this).css("background-image");b.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(b=RegExp.$1,a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod="+("no-repeat"==a(this).css("backgroundRepeat")?"crop":"scale")+", src='"+b+"')"}).each(function(){var b=a(this).css("position");"absolute"!=b&&"relative"!=b&&a(this).css("position","relative")}))}),a(".bt-content",q).append(j),j.show(),k.deltaDirection.match(/^left|right$/i)&&(l.tipHeight=parseInt(j.height()/2,10),j.height()%2==1&&l.tipHeight++,l.tipHeight=l.tipHeight<20?1:l.tipHeight-20,k.deltaDirection.match(/^left$/i)?a("div.bt-right",q).css("height",l.tipHeight+"px"):a("div.bt-left",q).css("height",l.tipHeight+"px")),q.css("opacity",0),q.css({width:q.width(),height:q.height()}),h(),q.hide(),a(window).bind("resize.bubbletip"+r,function(){var b=a(window).width(),c=a(window).height();k.position.match(/^fixed$/i)||b===s&&c===t||(s=b,t=c,n&&clearTimeout(n),n=setTimeout(function(){h()},250))}),a([q.get(0),this.get(0)]).bind("open.bubbletip",function(){return o=!1,m&&clearTimeout(m),0===k.delayShow?f():m=setTimeout(function(){f()},k.delayShow),!1}),a([q.get(0),this.get(0)]).bind("close.bubbletip",function(){return m&&clearTimeout(m),0===k.delayHide?g():m=setTimeout(function(){g()},k.delayHide),!1}),this},removeBubbletip:function(b){var c,d,e,f,g,h=[],i=[];for(c=a.makeArray(a(this).data("bubbletip_tips")),d=a.makeArray(b),e=0;e<d.length;e++)h.push(a(d[e]).get(0).id);for(e=0;e<c.length;e++)if(f=null,0===h.length||(f=a.inArray(c[e][0],h))>=0){for(g=a("#"+c[e][0]).get(0).parentNode;"table"!=g.tagName.toLowerCase();)g=g.parentNode;a("#"+c[e][0]).appendTo("body").hide(),a(g).remove(),a(this).unbind(".bubbletip"+c[e][1]),a(window).unbind(".bubbletip"+c[e][1])}else i.push(c[e]);return a(this).data("bubbletip_tips",i),this}})}(jQuery),function(a){var b=void 0;if("function"==typeof b&&b.amd)b(a);else if("object"==typeof exports)module.exports=a();else{var c=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=c,d}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(i){}return e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape),document.cookie=[b,"=",e,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join("")}b||(g={});for(var j=document.cookie?document.cookie.split("; "):[],k=/(%[0-9A-Z]{2})+/g,l=0;l<j.length;l++){var m=j[l].split("="),n=m[0].replace(k,decodeURIComponent),o=m.slice(1).join("=");'"'===o.charAt(0)&&(o=o.slice(1,-1));try{if(o=c.read?c.read(o,n):c(o,n)||o.replace(k,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(i){}if(b===n){g=o;break}b||(g[n]=o)}catch(i){}}return g}return d.get=d.set=d,d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})}),function(a,b,c,d){"use strict";var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&a.indexOf("%")>0},o=function(a){return a&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight)},p=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},q=function(a,b){return p(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var g,i,j,k,n,o,p,q={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(q={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,q,f.metadata())):q=f),g=b.href||q.href||(m(f)?f:null),i=b.title!==d?b.title:q.title||"",j=b.content||q.content,k=j?"html":b.type||q.type,!k&&q.isDom&&(k=f.data("fancybox-type"),k||(n=f.prop("class").match(/fancybox\.(\w+)/),k=n?n[1]:null)),m(g)&&(k||(h.isImage(g)?k="image":h.isSWF(g)?k="swf":"#"===g.charAt(0)?k="inline":m(f)&&(k="html",j=f)),"ajax"===k&&(o=g.split(/\s+/,2),g=o.shift(),p=o.shift())),j||("inline"===k?g?j=c(m(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):q.isDom&&(j=f):"html"===k?j=g:k||g||!q.isDom||(k="inline",j=f)),c.extend(q,{href:g,type:k,content:j,title:i,selector:p}),a[e]=q}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer);
},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")},e=function(){h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart"))};a===!0||!h.player.isActive&&a!==!1?e():d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=p(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var d,e=h.current,f=e?e.wrap:null;f&&(d=h._getPosition(b),a&&"scroll"===a.type?(delete d.position,f.stop(!0,!0).animate(d,200)):(f.css(d),e.pos=c.extend({},e.dim,d)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var a,b=h.current;b&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),h.update),a=b.keys,a&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(a,function(a,g){return b.group.length>1&&g[f]!==d?(h[a](g[f]),e.preventDefault(),!1):c.inArray(f,g)>-1?(h[a](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&b.mouseWheel&&h.wrap.bind("mousewheel.fb",function(a,d,e,f){for(var g=a.target||null,i=c(g),j=!1;i.length&&!(j||i.is(".fancybox-skin")||i.is(".fancybox-wrap"));)j=o(i[0]),i=c(i).parent();0===d||j||h.group.length>1&&!b.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),a.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b,d,e,f,g,i={};if(a=p(a),b=h.group[a]||null,!b)return!1;if(i=c.extend(!0,{},h.opts,b),f=i.margin,g=i.padding,"number"===c.type(f)&&(i.margin=[f,f,f,f]),"number"===c.type(g)&&(i.padding=[g,g,g,g]),i.modal&&c.extend(!0,i,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),i.autoSize&&(i.autoWidth=i.autoHeight=!0),"auto"===i.width&&(i.autoWidth=!0),"auto"===i.height&&(i.autoHeight=!0),i.group=h.group,i.index=a,h.coming=i,!1===h.trigger("beforeLoad"))return void(h.coming=null);if(e=i.type,d=i.href,!e)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,"image"!==e&&"swf"!==e||(i.autoHeight=i.autoWidth=!1,i.scrolling="visible"),"image"===e&&(i.aspectRatio=!0),"iframe"===e&&k&&(i.scrolling="scroll"),i.wrap=c(i.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+i.wrapCSS).appendTo(i.parent||"body"),c.extend(i,{skin:c(".fancybox-skin",i.wrap),outer:c(".fancybox-outer",i.wrap),inner:c(".fancybox-inner",i.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,b){i.skin.css("padding"+b,q(i.padding[a]))}),h.trigger("onReady"),"inline"===e||"html"===e){if(!i.content||!i.content.length)return h._error("content")}else if(!d)return h._error("href");"image"===e?h._loadImage():"ajax"===e?h._loadAjax():"iframe"===e?h._loadIframe():h._afterLoad()},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,a.complete!==!0&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var a,b,c=h.group,d=h.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,b,d,e,f,g,i=h.coming,j=h.current,k="fancybox-placeholder";if(h.hideLoading(),i&&h.isActive!==!1){if(!1===h.trigger("afterLoad",i,j))return i.wrap.stop(!0).trigger("onReset").remove(),void(h.coming=null);switch(j&&(h.trigger("beforeChange",j),j.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),a=i,b=i.content,d=i.type,e=i.scrolling,c.extend(h,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:j}),f=a.href,d){case"inline":case"ajax":case"html":a.selector?b=c("<div>").html(b).find(a.selector):l(b)&&(b.data(k)||b.data(k,c('<div class="'+k+'"></div>').insertAfter(b).hide()),b=b.show().detach(),a.wrap.bind("onReset",function(){c(this).find(b).length&&b.hide().replaceAll(b.data(k)).data(k,!1)}));break;case"image":b=a.tpl.image.replace("{href}",f);break;case"swf":b='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+f+'"></param>',g="",c.each(a.swf,function(a,c){b+='<param name="'+a+'" value="'+c+'"></param>',g+=" "+a+'="'+c+'"'}),b+='<embed src="'+f+'" type="application/x-shockwave-flash" width="100%" height="100%"'+g+"></embed></object>"}l(b)&&b.parent().is(a.inner)||a.inner.append(b),h.trigger("beforeShow"),a.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?j.prevMethod&&h.transitions[j.prevMethod]():c(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?a.nextMethod:a.openMethod](),h._preloadImages()}},_setDimension:function(){var a,b,d,e,f,g,i,j,k,l,m,o,r,s,t,u=h.getViewport(),v=0,w=!1,x=!1,y=h.wrap,z=h.skin,A=h.inner,B=h.current,C=B.width,D=B.height,E=B.minWidth,F=B.minHeight,G=B.maxWidth,H=B.maxHeight,I=B.scrolling,J=B.scrollOutside?B.scrollbarWidth:0,K=B.margin,L=p(K[1]+K[3]),M=p(K[0]+K[2]);if(y.add(z).add(A).width("auto").height("auto").removeClass("fancybox-tmp"),a=p(z.outerWidth(!0)-z.width()),b=p(z.outerHeight(!0)-z.height()),d=L+a,e=M+b,f=n(C)?(u.w-d)*p(C)/100:C,g=n(D)?(u.h-e)*p(D)/100:D,"iframe"===B.type){if(s=B.content,B.autoHeight&&1===s.data("ready"))try{s[0].contentWindow.document.location&&(A.width(f).height(9999),t=s.contents().find("body"),J&&t.css("overflow-x","hidden"),g=t.outerHeight(!0))}catch(N){}}else(B.autoWidth||B.autoHeight)&&(A.addClass("fancybox-tmp"),B.autoWidth||A.width(f),B.autoHeight||A.height(g),B.autoWidth&&(f=A.width()),B.autoHeight&&(g=A.height()),A.removeClass("fancybox-tmp"));if(C=p(f),D=p(g),k=f/g,E=p(n(E)?p(E,"w")-d:E),G=p(n(G)?p(G,"w")-d:G),F=p(n(F)?p(F,"h")-e:F),H=p(n(H)?p(H,"h")-e:H),i=G,j=H,B.fitToView&&(G=Math.min(u.w-d,G),H=Math.min(u.h-e,H)),o=u.w-L,r=u.h-M,B.aspectRatio?(C>G&&(C=G,D=p(C/k)),D>H&&(D=H,C=p(D*k)),E>C&&(C=E,D=p(C/k)),F>D&&(D=F,C=p(D*k))):(C=Math.max(E,Math.min(C,G)),B.autoHeight&&"iframe"!==B.type&&(A.width(C),D=A.height()),D=Math.max(F,Math.min(D,H))),B.fitToView)if(A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),B.aspectRatio)for(;(l>o||m>r)&&C>E&&D>F&&!(v++>19);)D=Math.max(F,Math.min(H,D-10)),C=p(D*k),E>C&&(C=E,D=p(C/k)),C>G&&(C=G,D=p(C/k)),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height();else C=Math.max(E,Math.min(C,C-(l-o))),D=Math.max(F,Math.min(D,D-(m-r)));J&&"auto"===I&&g>D&&o>C+a+J&&(C+=J),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),w=(l>o||m>r)&&C>E&&D>F,x=B.aspectRatio?i>C&&j>D&&f>C&&g>D:(i>C||j>D)&&(f>C||g>D),c.extend(B,{dim:{width:q(l),height:q(m)},origWidth:f,origHeight:g,canShrink:w,canExpand:x,wPadding:a,hPadding:b,wrapSpace:m-z.outerHeight(!0),skinSpace:z.height()-D}),!s&&B.autoHeight&&D>F&&H>D&&!x&&A.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],g={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?g.position="fixed":b.locked||(g.top+=c.y,g.left+=c.x),g.top=q(Math.max(g.top,g.top+(c.h-f)*b.topRatio)),g.left=q(Math.max(g.left,g.left+(c.w-e)*b.leftRatio)),g},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&h.group.length>1)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:q(d.top-g*a.topRatio),left:q(d.left-i*a.leftRatio),width:q(e+i),height:q(f+g)}},step:function(a,b){var c,d,e,f=b.prop,g=h.current,i=g.wrapSpace,j=g.skinSpace;"width"!==f&&"height"!==f||(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===f?g.wPadding:g.hPadding,e=a-d,h.skin[f](p("width"===f?e:e-i*c)),h.inner[f](p("width"===f?e:e-i*c-j*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var a,b=h.current,c=b.nextEffect,d=b.pos,e={opacity:1},f=h.direction,g=200;d.opacity=.1,"elastic"===c&&(a="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(d[a]=q(p(d[a])-g),e[a]="+="+g+"px"):(d[a]=q(p(d[a])+g),e[a]="-="+g+"px")),"none"===c?h._afterZoomIn():h.wrap.css(d).animate(e,{duration:b.nextSpeed,easing:b.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction,f=200;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"="+f+"px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var a,c="100%";this.overlay.width(c).height("100%"),i?(a=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>a&&(c=g.width())):g.width()>f.width()&&(c=g.width()),this.overlay.width(c).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),a.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(this.margin!==!1&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b,d,e=h.current,f=e.title,g=a.type;if(c.isFunction(f)&&(f=f.call(e.element,e)),m(f)&&""!==c.trim(f)){switch(b=c('<div class="fancybox-title fancybox-title-'+g+'-wrap">'+f+"</div>"),g){case"inside":d=h.skin;break;case"outside":d=h.wrap;break;case"over":d=h.inner;break;default:d=h.skin,b.appendTo("body"),i&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(p(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](d)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var g,i,j=c(this).blur(),k=b;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||j.is(".fancybox-wrap")||(g=a.groupAttr||"data-fancybox-group",i=j.attr(g),i||(g="rel",i=j.get(0)[g]),i&&""!==i&&"nofollow"!==i&&(j=e.length?c(e):d,j=j.filter("["+g+'="'+i+'"]'),k=j.index(this)),a.index=k,h.open(j,a)!==!1&&f.preventDefault())};return a=a||{},b=a.index||0,e&&a.live!==!1?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){var b,f;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(a){if(null===a)return"null";var b,c,d,e,f=$.type(a);if("undefined"!==f){if("number"===f||"boolean"===f)return String(a);if("string"===f)return $.quoteString(a);if("function"==typeof a.toJSON)return $.toJSON(a.toJSON());if("date"===f){var g=a.getUTCMonth()+1,h=a.getUTCDate(),i=a.getUTCFullYear(),j=a.getUTCHours(),k=a.getUTCMinutes(),l=a.getUTCSeconds(),m=a.getUTCMilliseconds();return 10>g&&(g="0"+g),10>h&&(h="0"+h),10>j&&(j="0"+j),10>k&&(k="0"+k),10>l&&(l="0"+l),100>m&&(m="0"+m),10>m&&(m="0"+m),'"'+i+"-"+g+"-"+h+"T"+j+":"+k+":"+l+"."+m+'Z"'}if(b=[],$.isArray(a)){for(c=0;c<a.length;c++)b.push($.toJSON(a[c])||"null");return"["+b.join(",")+"]"}if("object"==typeof a){for(c in a)if(hasOwn.call(a,c)){if(f=typeof c,"number"===f)d='"'+c+'"';else{if("string"!==f)continue;d=$.quoteString(c)}f=typeof a[c],"function"!==f&&"undefined"!==f&&(e=$.toJSON(a[c]),b.push(d+":"+e))}return"{"+b.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(a){return a.match(escape)?'"'+a.replace(escape,function(a){var b=meta[a];return"string"==typeof b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'}}(jQuery),function(a){function b(){}function c(a){g=[a]}function d(a,b,c){return a&&a.apply(b.context||b,c)}function e(a){return/\?/.test(a)?"&":"?"}function f(f){function n(a){X++||(Y(),S&&(A[U]={s:[a]}),O&&(a=O.apply(f,[a])),d(L,f,[a,v,f]),d(N,f,[f,v]))}function F(a){X++||(Y(),S&&a!=w&&(A[U]=a),d(M,f,[f,a]),d(N,f,[f,a]))}f=a.extend({},C,f);var G,H,I,J,K,L=f.success,M=f.error,N=f.complete,O=f.dataFilter,P=f.callbackParameter,Q=f.callback,R=f.cache,S=f.pageCache,T=f.charset,U=f.url,V=f.data,W=f.timeout,X=0,Y=b;return y&&y(function(a){a.done(L).fail(M),L=a.resolve,M=a.reject}).promise(f),f.abort=function(){!X++&&Y()},d(f.beforeSend,f,[f])===!1||X?f:(U=U||j,V=V?"string"==typeof V?V:a.param(V,f.traditional):j,U+=V?e(U)+V:j,P&&(U+=e(U)+encodeURIComponent(P)+"=?"),!R&&!S&&(U+=e(U)+"_"+(new Date).getTime()+"="),U=U.replace(/=\?(&|$)/,"="+Q+"$1"),S&&(G=A[U])?G.s?n(G.s[0]):F(G):(x[Q]=c,I=a(u)[0],I.id=m+B++,T&&(I[i]=T),D&&D.version()<11.6?(J=a(u)[0]).text="document.getElementById('"+I.id+"')."+p+"()":I[h]=h,E&&(I.htmlFor=I.id,I.event=o),I[q]=I[p]=I[r]=function(a){if(!I[s]||!/i/.test(I[s])){try{I[o]&&I[o]()}catch(b){}a=g,g=0,a?n(a[0]):F(k)}},I.src=U,Y=function(a){K&&clearTimeout(K),I[r]=I[q]=I[p]=null,z[t](I),J&&z[t](J)},z[l](I,H=z.firstChild),J&&z[l](J,H),K=W>0&&setTimeout(function(){F(w)},W)),f)}var g,h="async",i="charset",j="",k="error",l="insertBefore",m="_jqjsp",n="on",o=n+"click",p=n+k,q=n+"load",r=n+"readystatechange",s="readyState",t="removeChild",u="<script>",v="success",w="timeout",x=window,y=a.Deferred,z=a("head")[0]||document.documentElement,A={},B=0,C={callback:m,url:location.href},D=x.opera,E=!!a("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;f.setup=function(b){a.extend(C,b)},a.jsonp=f}(jQuery),function(a){function b(b){var c,d,e,f=arguments.length,g=window[b],h=arguments,i=h[1];if(2>f)throw new Error("Minimum 2 arguments must be given");if(a.isArray(i)){d={};for(var j in i){c=i[j];try{d[c]=JSON.parse(g.getItem(c))}catch(k){d[c]=g.getItem(c)}}return d}if(2!=f){try{d=JSON.parse(g.getItem(i))}catch(k){throw new ReferenceError(i+" is not defined in this storage")}for(var j=2;f-1>j;j++)if(d=d[h[j]],void 0===d)throw new ReferenceError([].slice.call(h,1,j+1).join(".")+" is not defined in this storage");if(a.isArray(h[j])){e=d,d={};for(var l in h[j])d[h[j][l]]=e[h[j][l]];return d}return d[h[j]]}try{return JSON.parse(g.getItem(i))}catch(k){return g.getItem(i)}}function c(b){var c,d,e=arguments.length,f=window[b],g=arguments,h=g[1],i=g[2],j={};if(2>e||!a.isPlainObject(h)&&3>e)throw new Error("Minimum 3 arguments must be given or second parameter must be an object");if(a.isPlainObject(h)){for(var k in h)c=h[k],a.isPlainObject(c)?f.setItem(k,JSON.stringify(c)):f.setItem(k,c);return h}if(3==e)return"object"==typeof i?f.setItem(h,JSON.stringify(i)):f.setItem(h,i),i;try{d=f.getItem(h),null!=d&&(j=JSON.parse(d))}catch(l){}d=j;for(var k=2;e-2>k;k++)c=g[k],d[c]&&a.isPlainObject(d[c])||(d[c]={}),d=d[c];return d[g[k]]=g[k+1],f.setItem(h,JSON.stringify(j)),j}function d(b){var c,d,e=arguments.length,f=window[b],g=arguments,h=g[1];if(2>e)throw new Error("Minimum 2 arguments must be given");if(a.isArray(h)){for(var i in h)f.removeItem(h[i]);return!0}if(2==e)return f.removeItem(h),!0;try{c=d=JSON.parse(f.getItem(h))}catch(j){throw new ReferenceError(h+" is not defined in this storage")}for(var i=2;e-1>i;i++)if(d=d[g[i]],void 0===d)throw new ReferenceError([].slice.call(g,1,i).join(".")+" is not defined in this storage");if(a.isArray(g[i]))for(var k in g[i])delete d[g[i][k]];else delete d[g[i]];return f.setItem(h,JSON.stringify(c)),!0}function e(b,c){var e=h(b);for(var f in e)d(b,e[f]);if(c)for(var f in a.namespaceStorages)i(f)}function f(c){var d=arguments.length,e=arguments,g=(window[c],e[1]);if(1==d)return 0==h(c).length;if(a.isArray(g)){for(var i=0;i<g.length;i++)if(!f(c,g[i]))return!1;return!0}try{var j=b.apply(this,arguments);a.isArray(e[d-1])||(j={totest:j});for(var i in j)if(!(a.isPlainObject(j[i])&&a.isEmptyObject(j[i])||a.isArray(j[i])&&!j[i].length)&&j[i])return!1;return!0}catch(k){return!0}}function g(c){var d=arguments.length,e=arguments,f=(window[c],e[1]);if(2>d)throw new Error("Minimum 2 arguments must be given");if(a.isArray(f)){for(var h=0;h<f.length;h++)if(!g(c,f[h]))return!1;return!0}try{var i=b.apply(this,arguments);a.isArray(e[d-1])||(i={totest:i});for(var h in i)if(void 0===i[h]||null===i[h])return!1;return!0}catch(j){return!1}}function h(c){var d=arguments.length,e=window[c],f=arguments,g=(f[1],[]),h={};if(h=d>1?b.apply(this,f):e,h._cookie)for(var i in a.cookie())""!=i&&g.push(i.replace(h._prefix,""));else for(var j in h)g.push(j);return g}function i(b){if(!b||"string"!=typeof b)throw new Error("First parameter must be a string");window.localStorage.getItem(b)||window.localStorage.setItem(b,"{}"),window.sessionStorage.getItem(b)||window.sessionStorage.setItem(b,"{}");var c={localStorage:a.extend({},a.localStorage,{_ns:b}),sessionStorage:a.extend({},a.sessionStorage,{_ns:b})};return a.cookie&&(window.cookieStorage.getItem(b)||window.cookieStorage.setItem(b,"{}"),c.cookieStorage=a.extend({},a.cookieStorage,{_ns:b})),a.namespaceStorages[b]=c,c}var j="ls_",k="ss_",l={_type:"",_ns:"",_callMethod:function(a,b){var c=[this._type],b=Array.prototype.slice.call(b),d=b[0];return this._ns&&c.push(this._ns),"string"==typeof d&&-1!==d.indexOf(".")&&(b.shift(),[].unshift.apply(b,d.split("."))),[].push.apply(c,b),a.apply(this,c)},get:function(){return this._callMethod(b,arguments)},set:function(){var b=arguments.length,d=arguments,e=d[0];if(1>b||!a.isPlainObject(e)&&2>b)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(a.isPlainObject(e)&&this._ns){for(var f in e)c(this._type,this._ns,f,e[f]);return e}return r=this._callMethod(c,d),this._ns?r[e.split(".")[0]]:r},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(d,arguments)},removeAll:function(a){return this._ns?(c(this._type,this._ns,{}),!0):e(this._type,a)},isEmpty:function(){return this._callMethod(f,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(g,arguments)},keys:function(){return this._callMethod(h,arguments)}};if(a.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var m={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(b,c){a.cookie(this._prefix+b,c,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(b){return a.cookie(this._prefix+b)},removeItem:function(b){return a.removeCookie(this._prefix+b)},clear:function(){for(var b in a.cookie())""!=b&&(!this._prefix&&-1===b.indexOf(j)&&-1===b.indexOf(k)||this._prefix&&0===b.indexOf(this._prefix))&&a.removeCookie(b)},setExpires:function(a){return this._expires=a,this},setPath:function(a){return this._path=a,this},setDomain:function(a){return this._domain=a,this},setConf:function(a){return a.path&&(this._path=a.path),a.domain&&(this._domain=a.domain),a.expires&&(this._expires=a.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};window.localStorage||(window.localStorage=a.extend({},m,{_prefix:j,_expires:3650}),window.sessionStorage=a.extend({},m,{_prefix:k+window.name+"_"})),window.cookieStorage=a.extend({},m),a.cookieStorage=a.extend({},l,{_type:"cookieStorage",setExpires:function(a){return window.cookieStorage.setExpires(a),this},setPath:function(a){return window.cookieStorage.setPath(a),this},setDomain:function(a){return window.cookieStorage.setDomain(a),this},setConf:function(a){return window.cookieStorage.setConf(a),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}a.initNamespaceStorage=function(a){return i(a)},a.localStorage=a.extend({},l,{_type:"localStorage"}),a.sessionStorage=a.extend({},l,{_type:"sessionStorage"}),a.namespaceStorages={},a.removeAllStorages=function(b){a.localStorage.removeAll(b),a.sessionStorage.removeAll(b),a.cookieStorage&&a.cookieStorage.removeAll(b),b||(a.namespaceStorages={})}}(jQuery),function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"y",duration:1},c.window=function(b){return a(window).scrollable()},a.fn.scrollable=function(){return this.map(function(){var b=this.parentWindow||this.defaultView,c="#document"==this.nodeName?b.frameElement||b:this,d=c.contentDocument||(c.contentWindow||c).document,e=c.setInterval;return"IFRAME"==c.nodeName||e&&a.browser.safari?d.body:e?d.documentElement:this})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this.scrollable().each(function(){function c(a){j.animate(l,e,f.easing,a&&function(){a.call(this,d,f)})}function g(a){var b="scroll"+a,c=i.ownerDocument;return m?Math.max(c.documentElement[b],c.body[b]):i[b]}var h,i=this,j=a(i),k=d,l={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(px)?$/.test(k)){k=b(k);break}k=a(k,this);case"object":(k.is||k.style)&&(h=(k=a(k)).offset())}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=i[n],p="x"==b?"Width":"Height",q=p.toLowerCase();h?(l[n]=h[e]+(m?0:o-j.offset()[e]),f.margin&&(l[n]-=parseInt(k.css("margin"+d))||0,l[n]-=parseInt(k.css("border"+d+"Width"))||0),l[n]+=f.offset[e]||0,f.over[e]&&(l[n]+=k[q]()*f.over[e])):l[n]=k[e],/^\d+$/.test(l[n])&&(l[n]=l[n]<=0?0:Math.min(l[n],g(p))),!a&&f.queue&&(o!=l[n]&&c(f.onAfterFirst),delete l[n])}),c(f.onAfter)}).end()}}(jQuery),function(a){function b(b){var c={},d=/^jQuery\d+$/;return a.each(b.attributes,function(a,b){b.specified&&!d.test(b.name)&&(c[b.name]=b.value)}),c}function c(b,c){var d=this,f=a(d);if(d.value==f.attr("placeholder")&&f.hasClass(m.customClass))if(f.data("placeholder-password")){if(f=f.hide().nextAll('input[type="password"]:first').show().attr("id",f.removeAttr("id").data("placeholder-id")),b===!0)return f[0].value=c;f.focus()}else d.value="",f.removeClass(m.customClass),d==e()&&d.select()}function d(){var d,e=this,f=a(e),g=this.id;if(""===e.value){if("password"===e.type){if(!f.data("placeholder-textinput")){try{d=f.clone().attr({type:"text"})}catch(h){d=a("<input>").attr(a.extend(b(this),{type:"text"}))}d.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",c),f.data({"placeholder-textinput":d,"placeholder-id":g}).before(d)}f=f.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",g).show()}f.addClass(m.customClass),f[0].value=f.attr("placeholder")}else f.removeClass(m.customClass)}function e(){try{return document.activeElement}catch(a){}}var f,g,h="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!h,j="placeholder"in document.createElement("textarea")&&!h,k=a.valHooks,l=a.propHooks;if(i&&j)g=a.fn.placeholder=function(){return this},g.input=g.textarea=!0;else{var m={};g=a.fn.placeholder=function(b){var e={customClass:"placeholder"};m=a.extend({},e,b);var f=this;return f.filter((i?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":c,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder"),f},g.input=i,g.textarea=j,f={get:function(b){var c=a(b),d=c.data("placeholder-password");return d?d[0].value:c.data("placeholder-enabled")&&c.hasClass(m.customClass)?"":b.value},set:function(b,f){var g=a(b),h=g.data("placeholder-password");return h?h[0].value=f:g.data("placeholder-enabled")?(""===f?(b.value=f,b!=e()&&d.call(b)):g.hasClass(m.customClass)?c.call(b,!0,f)||(b.value=f):b.value=f,g):b.value=f}},i||(k.input=f,l.value=f),j||(k.textarea=f,l.value=f),a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+m.customClass,this).each(c);
setTimeout(function(){b.each(d)},10)})}),a(window).bind("beforeunload.placeholder",function(){a("."+m.customClass).each(function(){this.value=""})})}}(jQuery);var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var Intercom=function(){var a=function(){};a.createInterface=function(a){var b={};return b.on=function(b,c){"undefined"==typeof this[a]&&(this[a]={}),this[a].hasOwnProperty(b)||(this[a][b]=[]),this[a][b].push(c)},b.off=function(b,c){"undefined"!=typeof this[a]&&this[a].hasOwnProperty(b)&&e.removeItem(c,this[a][b])},b.trigger=function(b){if("undefined"!=typeof this[a]&&this[a].hasOwnProperty(b))for(var c=Array.prototype.slice.call(arguments,1),d=0;d<this[a][b].length;d++)this[a][b][d].apply(this[a][b][d],c)},b};var b=a.createInterface("_handlers");a.prototype._on=b.on,a.prototype._off=b.off,a.prototype._trigger=b.trigger;var c=a.createInterface("handlers");a.prototype.on=function(){c.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},a.prototype.off=c.off,a.prototype.trigger=c.trigger;var d=window.localStorage;"undefined"==typeof d&&(d={getItem:function(){},setItem:function(){},removeItem:function(){}});var e={};e.guid=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),e.throttle=function(a,b){var c=0;return function(){var d=(new Date).getTime();d-c>a&&(c=d,b.apply(this,arguments))}},e.extend=function(a,b){if("undefined"!=typeof a&&a||(a={}),"object"==typeof b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},e.removeItem=function(a,b){for(var c=b.length-1;c>=0;c--)b[c]===a&&b.splice(c,1);return b};var f=function(){var a=this,b=(new Date).getTime();this.origin=e.guid(),this.lastMessage=b,this.bindings=[],this.receivedIDs={},this.previousValues={};var c=function(){a._onStorageEvent.apply(a,arguments)};window.attachEvent?document.attachEvent("onstorage",c):window.addEventListener("storage",c,!1)};f.prototype._transaction=function(a){var b=1e3,c=20,e=this,f=!1,g=!1,h=null,j=function(){if(!f){var l=(new Date).getTime(),m=parseInt(d.getItem(i)||0);if(m&&b>l-m)return g||(e._on("storage",j),g=!0),void(h=window.setTimeout(j,c));f=!0;try{d.setItem(i,l)}catch(n){}a(),k()}},k=function(){g&&e._off("storage",j),h&&window.clearTimeout(h),d.removeItem(i)};j()},f.prototype._cleanup_emit=e.throttle(100,function(){this._transaction(function(){for(var a=(new Date).getTime(),b=a-j,c=0,e=JSON.parse(d.getItem(g)||"[]"),f=e.length-1;f>=0;f--)e[f].timestamp<b&&(e.splice(f,1),c++);c>0&&d.setItem(g,JSON.stringify(e))})}),f.prototype._cleanup_once=e.throttle(100,function(){var a=this;this._transaction(function(){var b,c=JSON.parse(d.getItem(h)||"{}"),e=((new Date).getTime(),0);for(b in c)a._once_expired(b,c)&&(delete c[b],e++);e>0&&d.setItem(h,JSON.stringify(c))})}),f.prototype._once_expired=function(a,b){if(!b)return!0;if(!b.hasOwnProperty(a))return!0;if("object"!=typeof b[a])return!0;var c=b[a].ttl||k,d=(new Date).getTime(),e=b[a].timestamp;return d-c>e},f.prototype._localStorageChanged=function(a,b){if(a&&a.key)return a.key===b;var c=d.getItem(b);return c===this.previousValues[b]?!1:(this.previousValues[b]=c,!0)},f.prototype._onStorageEvent=function(a){a=a||window.event;var b=this;this._localStorageChanged(a,g)&&this._transaction(function(){for(var a=(new Date).getTime(),c=d.getItem(g),e=JSON.parse(c||"[]"),f=0;f<e.length;f++)if(e[f].origin!==b.origin&&!(e[f].timestamp<b.lastMessage)){if(e[f].id){if(b.receivedIDs.hasOwnProperty(e[f].id))continue;b.receivedIDs[e[f].id]=!0}b.trigger(e[f].name,e[f].payload)}b.lastMessage=a}),this._trigger("storage",a)},f.prototype._emit=function(a,b,c){if(c="string"==typeof c||"number"==typeof c?String(c):null,c&&c.length){if(this.receivedIDs.hasOwnProperty(c))return;this.receivedIDs[c]=!0}var e={id:c,name:a,origin:this.origin,timestamp:(new Date).getTime(),payload:b},f=this;this._transaction(function(){var c=d.getItem(g)||"[]",h="[]"===c?"":",";c=[c.substring(0,c.length-1),h,JSON.stringify(e),"]"].join(""),d.setItem(g,c),f.trigger(a,b),window.setTimeout(function(){f._cleanup_emit()},50)})},f.prototype.bind=function(a,b){for(var c=0;c<f.bindings.length;c++){var d=f.bindings[c].factory(a,b||null,this);d&&this.bindings.push(d)}},f.prototype.emit=function(a,b){this._emit.apply(this,arguments),this._trigger("emit",a,b)},f.prototype.once=function(a,b,c){if(f.supported){var e=this;this._transaction(function(){var f=JSON.parse(d.getItem(h)||"{}");e._once_expired(a,f)&&(f[a]={},f[a].timestamp=(new Date).getTime(),"number"==typeof c&&(f[a].ttl=1e3*c),d.setItem(h,JSON.stringify(f)),b(),window.setTimeout(function(){e._cleanup_once()},50))})}},e.extend(f.prototype,a.prototype),f.bindings=[],f.supported="undefined"!=typeof d;var g="intercom",h="intercom_once",i="intercom_lock",j=5e4,k=36e5;return f.destroy=function(){d.removeItem(i),d.removeItem(g),d.removeItem(h)},f.getInstance=function(){var a=null;return function(){return a||(a=new f),a}}(),f}();if(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null!=a?null==b||c?a[0]:s.initial(a,a.length-b):void 0},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null!=a?null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b)):void 0},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),function(a){"use strict";function b(a,c){if(!(this instanceof b)){var d=new b(a,c);return d.open(),d}this.id=b.id++,this.setup(a,c),this.chainCallbacks(b._callbackChain)}if("undefined"==typeof a)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));var c=[],d=function(b){return c=a.grep(c,function(a){return a!==b&&a.$instance.closest("body").length>0})},e=function(a,b){var c={},d=new RegExp("^"+b+"([A-Z])(.*)");for(var e in a){var f=e.match(d);if(f){var g=(f[1]+f[2].replace(/([A-Z])/g,"-$1")).toLowerCase();c[g]=a[e]}}return c},f={keyup:"onKeyUp",resize:"onResize"},g=function(c){a.each(b.opened().reverse(),function(){return c.isDefaultPrevented()||!1!==this[f[c.type]](c)?void 0:(c.preventDefault(),c.stopPropagation(),!1)})},h=function(c){if(c!==b._globalHandlerInstalled){b._globalHandlerInstalled=c;var d=a.map(f,function(a,c){return c+"."+b.prototype.namespace}).join(" ");a(window)[c?"on":"off"](d,g)}};b.prototype={constructor:b,namespace:"chatstack-featherlight",targetAttr:"data-chatstack-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:a.noop,beforeContent:a.noop,beforeClose:a.noop,afterOpen:a.noop,afterContent:a.noop,afterClose:a.noop,onKeyUp:a.noop,onResize:a.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(b,c){"object"!=typeof b||b instanceof a!=!1||c||(c=b,b=void 0);var d=a.extend(this,c,{target:b}),e=d.resetCss?d.namespace+"-reset":d.namespace,f=a(d.background||['<div class="'+e+"-loading "+e+'">','<div class="'+e+'-content">','<span class="'+e+"-close-icon "+d.namespace+'-close">',d.closeIcon,"</span>",'<div class="'+d.namespace+'-inner">'+d.loading+"</div>","</div>","</div>"].join("")),g="."+d.namespace+"-close"+(d.otherClose?","+d.otherClose:"");return d.$instance=f.clone().addClass(d.variant),d.$instance.on(d.closeTrigger+"."+d.namespace,function(b){var c=a(b.target);("background"===d.closeOnClick&&c.is("."+d.namespace)||"anywhere"===d.closeOnClick||c.closest(g).length)&&(b.preventDefault(),d.close())}),this},getContent:function(){if(this.persist!==!1&&this.$content)return this.$content;var b=this,c=this.constructor.contentFilters,d=function(a){return b.$currentTarget&&b.$currentTarget.attr(a)},e=d(b.targetAttr),f=b.target||e||"",g=c[b.type];if(!g&&f in c&&(g=c[f],f=b.target&&e),f=f||d("href")||"",!g)for(var h in c)b[h]&&(g=c[h],f=b[h]);if(!g){var i=f;if(f=null,a.each(b.contentFilters,function(){return g=c[this],g.test&&(f=g.test(i)),!f&&g.regex&&i.match&&i.match(g.regex)&&(f=i),!f}),!f)return"console"in window&&window.console.error("Featherlight: no content filter found "+(i?' for "'+i+'"':" (no target specified)")),!1}return g.process.call(b,f)},setContent:function(b){var c=this;return(b.is("iframe")||a("iframe",b).length>0)&&c.$instance.addClass(c.namespace+"-iframe"),c.$instance.removeClass(c.namespace+"-loading"),c.$instance.find("."+c.namespace+"-inner").not(b).slice(1).remove().end().replaceWith(a.contains(c.$instance[0],b[0])?"":b),c.$content=b.addClass(c.namespace+"-inner"),c},open:function(b){var d=this;if(d.$instance.hide().appendTo(d.root),!(b&&b.isDefaultPrevented()||d.beforeOpen(b)===!1)){b&&b.preventDefault();var e=d.getContent();if(e)return c.push(d),h(!0),d.$instance.fadeIn(d.openSpeed),d.beforeContent(b),a.when(e).always(function(a){d.setContent(a),d.afterContent(b)}).then(d.$instance.promise()).done(function(){d.afterOpen(b)})}return d.$instance.detach(),a.Deferred().reject().promise()},close:function(b){var c=this,e=a.Deferred();return c.beforeClose(b)===!1?e.reject():(0===d(c).length&&h(!1),c.$instance.fadeOut(c.closeSpeed,function(){c.$instance.detach(),c.afterClose(b),e.resolve()})),e.promise()},chainCallbacks:function(b){for(var c in b)this[c]=a.proxy(b[c],this,a.proxy(this[c],this))}},a.extend(b,{id:0,autoBind:"[data-chatstack-featherlight]",defaults:b.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(b){return b instanceof a&&b},process:function(b){return this.persist!==!1?a(b):a(b).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(b){var c=this,d=a.Deferred(),e=new Image,f=a('<img src="'+b+'" alt="" class="'+c.namespace+'-image" />');return e.onload=function(){f.naturalWidth=e.width,f.naturalHeight=e.height,d.resolve(f)},e.onerror=function(){d.reject(f)},e.src=b,d.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(b){return a(b)}},ajax:{regex:/./,process:function(b){var c=a.Deferred(),d=a("<div></div>").load(b,function(a,b){"error"!==b&&c.resolve(d.contents()),c.fail()});return c.promise()}},iframe:{process:function(b){var c=new a.Deferred,d=a("<iframe/>").hide().attr("src",b).css(e(this,"iframe")).on("load",function(){c.resolve(d.show())}).appendTo(this.$instance.find("."+this.namespace+"-content"));return c.promise()}},text:{process:function(b){return a("<div>",{text:b})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(b,c){var d=this,e=new RegExp("^data-"+c+"-(.*)"),f={};return b&&b.attributes&&a.each(b.attributes,function(){var b=this.name.match(e);if(b){var c=this.value,g=a.camelCase(b[1]);if(a.inArray(g,d.functionAttributes)>=0)c=new Function(c);else try{c=a.parseJSON(c)}catch(h){}f[g]=c}}),f},extend:function(b,c){var d=function(){this.constructor=b};return d.prototype=this.prototype,b.prototype=new d,b.__super__=this.prototype,a.extend(b,this,c),b.defaults=b.prototype,b},attach:function(b,c,d){var e=this;"object"!=typeof c||c instanceof a!=!1||d||(d=c,c=void 0),d=a.extend({},d);var f,g=d.namespace||e.defaults.namespace,h=a.extend({},e.defaults,e.readElementConfig(b[0],g),d);return b.on(h.openTrigger+"."+h.namespace,h.filter,function(g){var i=a.extend({$source:b,$currentTarget:a(this)},e.readElementConfig(b[0],h.namespace),e.readElementConfig(this,h.namespace),d),j=f||a(this).data("featherlight-persisted")||new e(c,i);"shared"===j.persist?f=j:j.persist!==!1&&a(this).data("featherlight-persisted",j),i.$currentTarget.blur(),j.open(g)}),b},current:function(){var a=this.opened();return a[a.length-1]||null},opened:function(){var b=this;return d(),a.grep(c,function(a){return a instanceof b})},close:function(){var a=this.current();return a?a.close():void 0},_onReady:function(){var b=this;b.autoBind&&(a(b.autoBind).each(function(){b.attach(a(this))}),a(document).on("click",b.autoBind,function(c){c.isDefaultPrevented()||(c.preventDefault(),b.attach(a(c.currentTarget)),a(c.target).click())}))},
_callbackChain:{onKeyUp:function(a,b){return 27===b.keyCode?(this.closeOnEsc&&this.$instance.find("."+this.namespace+"-close:first").click(),!1):a(b)},onResize:function(a,b){if(this.$content.naturalWidth){var c=this.$content.naturalWidth,d=this.$content.naturalHeight;this.$content.css("width","").css("height","");var e=Math.max(c/parseInt(this.$content.parent().css("width"),10),d/parseInt(this.$content.parent().css("height"),10));e>1&&this.$content.css("width",""+c/e+"px").css("height",""+d/e+"px")}return a(b)},afterContent:function(a,b){var c=a(b);return this.onResize(b),c}}}),a.featherlight=b,a.fn.featherlight=function(a,c){return b.attach(this,a,c)},a(document).ready(function(){b._onReady()})}(jQuery),function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||j.defaults,this.rules=k.normal,this.options.gfm&&(this.options.tables?this.rules=k.tables:this.rules=k.gfm)}function b(a,b){if(this.options=b||j.defaults,this.links=a,this.rules=l.normal,this.renderer=this.options.renderer||new c,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=l.breaks:this.rules=l.gfm:this.options.pedantic&&(this.rules=l.pedantic)}function c(a){this.options=a||{}}function d(a){this.tokens=[],this.token=null,this.options=a||j.defaults,this.options.renderer=this.options.renderer||new c,this.renderer=this.options.renderer,this.renderer.options=this.options}function e(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function f(a){return a.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(a,b){return b=b.toLowerCase(),"colon"===b?":":"#"===b.charAt(0)?"x"===b.charAt(1)?String.fromCharCode(parseInt(b.substring(2),16)):String.fromCharCode(+b.substring(1)):""})}function g(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function h(){}function i(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function j(b,c,f){if(f||"function"==typeof c){f||(f=c,c=null),c=i({},j.defaults,c||{});var g,h,k=c.highlight,l=0;try{g=a.lex(b,c)}catch(m){return f(m)}h=g.length;var n=function(a){if(a)return c.highlight=k,f(a);var b;try{b=d.parse(g,c)}catch(e){a=e}return c.highlight=k,a?f(a):f(null,b)};if(!k||k.length<3)return n();if(delete c.highlight,!h)return n();for(;l<g.length;l++)!function(a){return"code"!==a.type?--h||n():k(a.text,a.lang,function(b,c){return b?n(b):null==c||c===a.text?--h||n():(a.text=c,a.escaped=!0,void(--h||n()))})}(g[l])}else try{return c&&(c=i({},j.defaults,c)),d.parse(a.lex(b,c),c)}catch(m){if(m.message+="\nPlease report this to https://github.com/chjj/marked.",(c||j.defaults).silent)return"<p>An error occured:</p><pre>"+e(m.message+"",!0)+"</pre>";throw m}}var k={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};k.bullet=/(?:[*+-]|\d+\.)/,k.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,k.item=g(k.item,"gm")(/bull/g,k.bullet)(),k.list=g(k.list)(/bull/g,k.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+k.def.source+")")(),k.blockquote=g(k.blockquote)("def",k.def)(),k._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",k.html=g(k.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,k._tag)(),k.paragraph=g(k.paragraph)("hr",k.hr)("heading",k.heading)("lheading",k.lheading)("blockquote",k.blockquote)("tag","<"+k._tag)("def",k.def)(),k.normal=i({},k),k.gfm=i({},k.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),k.gfm.paragraph=g(k.paragraph)("(?!","(?!"+k.gfm.fences.source.replace("\\1","\\2")+"|"+k.list.source.replace("\\1","\\3")+"|")(),k.tables=i({},k.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=k,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b,c){for(var d,e,f,g,h,i,j,l,m,a=a.replace(/^ +$/gm,"");a;)if((f=this.rules.newline.exec(a))&&(a=a.substring(f[0].length),f[0].length>1&&this.tokens.push({type:"space"})),f=this.rules.code.exec(a))a=a.substring(f[0].length),f=f[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?f:f.replace(/\n+$/,"")});else if(f=this.rules.fences.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"code",lang:f[2],text:f[3]||""});else if(f=this.rules.heading.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"heading",depth:f[1].length,text:f[2]});else if(b&&(f=this.rules.nptable.exec(a))){for(a=a.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/\n$/,"").split("\n")},l=0;l<i.align.length;l++)/^ *-+: *$/.test(i.align[l])?i.align[l]="right":/^ *:-+: *$/.test(i.align[l])?i.align[l]="center":/^ *:-+ *$/.test(i.align[l])?i.align[l]="left":i.align[l]=null;for(l=0;l<i.cells.length;l++)i.cells[l]=i.cells[l].split(/ *\| */);this.tokens.push(i)}else if(f=this.rules.lheading.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"heading",depth:"="===f[2]?1:2,text:f[1]});else if(f=this.rules.hr.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"hr"});else if(f=this.rules.blockquote.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"blockquote_start"}),f=f[0].replace(/^ *> ?/gm,""),this.token(f,b,!0),this.tokens.push({type:"blockquote_end"});else if(f=this.rules.list.exec(a)){for(a=a.substring(f[0].length),g=f[2],this.tokens.push({type:"list_start",ordered:g.length>1}),f=f[0].match(this.rules.item),d=!1,m=f.length,l=0;m>l;l++)i=f[l],j=i.length,i=i.replace(/^ *([*+-]|\d+\.) +/,""),~i.indexOf("\n ")&&(j-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&l!==m-1&&(h=k.bullet.exec(f[l+1])[0],g===h||g.length>1&&h.length>1||(a=f.slice(l+1).join("\n")+a,l=m-1)),e=d||/\n\n(?!\s*$)/.test(i),l!==m-1&&(d="\n"===i.charAt(i.length-1),e||(e=d)),this.tokens.push({type:e?"loose_item_start":"list_item_start"}),this.token(i,!1,c),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(f=this.rules.html.exec(a))a=a.substring(f[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===f[1]||"script"===f[1]||"style"===f[1]),text:f[0]});else if(!c&&b&&(f=this.rules.def.exec(a)))a=a.substring(f[0].length),this.tokens.links[f[1].toLowerCase()]={href:f[2],title:f[3]};else if(b&&(f=this.rules.table.exec(a))){for(a=a.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<i.align.length;l++)/^ *-+: *$/.test(i.align[l])?i.align[l]="right":/^ *:-+: *$/.test(i.align[l])?i.align[l]="center":/^ *:-+ *$/.test(i.align[l])?i.align[l]="left":i.align[l]=null;for(l=0;l<i.cells.length;l++)i.cells[l]=i.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(i)}else if(b&&(f=this.rules.paragraph.exec(a)))a=a.substring(f[0].length),this.tokens.push({type:"paragraph",text:"\n"===f[1].charAt(f[1].length-1)?f[1].slice(0,-1):f[1]});else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),this.tokens.push({type:"text",text:f[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var l={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};l._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,l._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,l.link=g(l.link)("inside",l._inside)("href",l._href)(),l.reflink=g(l.reflink)("inside",l._inside)(),l.normal=i({},l),l.pedantic=i({},l.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),l.gfm=i({},l.normal,{escape:g(l.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:g(l.text)("]|","~]|")("|","|https?://|")()}),l.breaks=i({},l.gfm,{br:g(l.br)("{2,}","*")(),text:g(l.gfm.text)("{2,}","*")()}),b.rules=l,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,d,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1].charAt(6)?this.mangle(f[1].substring(7)):this.mangle(f[1]),d=this.mangle("mailto:")+c):(c=e(f[1]),d=c),g+=this.renderer.link(d,null,c);else if(this.inLink||!(f=this.rules.url.exec(a))){if(f=this.rules.tag.exec(a))!this.inLink&&/^<a /i.test(f[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(f[0])&&(this.inLink=!1),a=a.substring(f[0].length),g+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(f[0]):e(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),this.inLink=!0,g+=this.outputLink(f,{href:f[2],title:f[3]}),this.inLink=!1;else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0].charAt(0),a=f[0].substring(1)+a;continue}this.inLink=!0,g+=this.outputLink(f,b),this.inLink=!1}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+=this.renderer.strong(this.output(f[2]||f[1]));else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+=this.renderer.em(this.output(f[2]||f[1]));else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+=this.renderer.codespan(e(f[2],!0));else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+=this.renderer.br();else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+=this.renderer.del(this.output(f[1]));else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=this.renderer.text(e(this.smartypants(f[0])));else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}else a=a.substring(f[0].length),c=e(f[1]),d=c,g+=this.renderer.link(d,null,c);return g},b.prototype.outputLink=function(a,b){var c=e(b.href),d=b.title?e(b.title):null;return"!"!==a[0].charAt(0)?this.renderer.link(c,d,this.output(a[1])):this.renderer.image(c,d,e(a[1]))},b.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):a},b.prototype.mangle=function(a){if(!this.options.mangle)return a;for(var b,c="",d=a.length,e=0;d>e;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.prototype.code=function(a,b,c){if(this.options.highlight){var d=this.options.highlight(a,b);null!=d&&d!==a&&(c=!0,a=d)}return b?'<pre><code class="'+this.options.langPrefix+e(b,!0)+'">'+(c?a:e(a,!0))+"\n</code></pre>\n":"<pre><code>"+(c?a:e(a,!0))+"\n</code></pre>"},c.prototype.blockquote=function(a){return"<blockquote>\n"+a+"</blockquote>\n"},c.prototype.html=function(a){return a},c.prototype.heading=function(a,b,c){return"<h"+b+' id="'+this.options.headerPrefix+c.toLowerCase().replace(/[^\w]+/g,"-")+'">'+a+"</h"+b+">\n"},c.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},c.prototype.list=function(a,b){var c=b?"ol":"ul";return"<"+c+">\n"+a+"</"+c+">\n"},c.prototype.listitem=function(a){return"<li>"+a+"</li>\n"},c.prototype.paragraph=function(a){return"<p>"+a+"</p>\n"},c.prototype.table=function(a,b){return"<table>\n<thead>\n"+a+"</thead>\n<tbody>\n"+b+"</tbody>\n</table>\n"},c.prototype.tablerow=function(a){return"<tr>\n"+a+"</tr>\n"},c.prototype.tablecell=function(a,b){var c=b.header?"th":"td",d=b.align?"<"+c+' style="text-align:'+b.align+'">':"<"+c+">";return d+a+"</"+c+">\n"},c.prototype.strong=function(a){return"<strong>"+a+"</strong>"},c.prototype.em=function(a){return"<em>"+a+"</em>"},c.prototype.codespan=function(a){return"<code>"+a+"</code>"},c.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},c.prototype.del=function(a){return"<del>"+a+"</del>"},c.prototype.link=function(a,b,c){if(this.options.sanitize){try{var d=decodeURIComponent(f(a)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===d.indexOf("javascript:")||0===d.indexOf("vbscript:"))return""}var g='<a href="'+a+'"';return b&&(g+=' title="'+b+'"'),g+=">"+c+"</a>"},c.prototype.image=function(a,b,c){var d='<img src="'+a+'" alt="'+c+'"';return b&&(d+=' title="'+b+'"'),d+=this.options.xhtml?"/>":">"},c.prototype.text=function(a){return a},d.parse=function(a,b,c){var e=new d(b,c);return e.parse(a)},d.prototype.parse=function(a){this.inline=new b(a.links,this.options,this.renderer),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},d.prototype.next=function(){return this.token=this.tokens.pop()},d.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},d.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},d.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var a,b,c,d,e,f="",g="";for(c="",a=0;a<this.token.header.length;a++)d={header:!0,align:this.token.align[a]},c+=this.renderer.tablecell(this.inline.output(this.token.header[a]),{header:!0,align:this.token.align[a]});for(f+=this.renderer.tablerow(c),a=0;a<this.token.cells.length;a++){for(b=this.token.cells[a],c="",e=0;e<b.length;e++)c+=this.renderer.tablecell(this.inline.output(b[e]),{header:!1,align:this.token.align[e]});g+=this.renderer.tablerow(c)}return this.renderer.table(f,g);case"blockquote_start":for(var g="";"blockquote_end"!==this.next().type;)g+=this.tok();return this.renderer.blockquote(g);case"list_start":for(var g="",h=this.token.ordered;"list_end"!==this.next().type;)g+=this.tok();return this.renderer.list(g,h);case"list_item_start":for(var g="";"list_item_end"!==this.next().type;)g+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(g);case"loose_item_start":for(var g="";"list_item_end"!==this.next().type;)g+=this.tok();return this.renderer.listitem(g);case"html":var i=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(i);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},h.exec=h,j.options=j.setOptions=function(a){return i(j.defaults,a),j},j.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new c,xhtml:!1},j.Parser=d,j.parser=d.parse,j.Renderer=c,j.Lexer=a,j.lexer=a.lex,j.InlineLexer=b,j.inlineLexer=b.output,j.parse=j,"undefined"!=typeof module&&"object"==typeof exports?module.exports=j:"function"==typeof define&&define.amd?define(function(){return j}):this.marked=j}.call(function(){return this||("undefined"!=typeof window?window:global)}()),"undefined"!=typeof LiveHelpSettings&&"undefined"==typeof Chatstack)var Chatstack=LiveHelpSettings;if(Chatstack._=_.noConflict(),Chatstack.cookies=Cookies.noConflict(),Chatstack.iframe=function(){try{return window.self!==window.top}catch(a){return!0}},Chatstack.events=jQuery({}),Chatstack.e&&Chatstack.e.length>0)for(var i=0;i<Chatstack.e.length;i++)Chatstack.e[i]();!function(a,b,c,d,e,f,g){"use strict";function h(){this.store=f.initNamespaceStorage(c+"Guest").localStorage,this.get=function(a){return this.store.get(a)},this.set=function(a,b){return this.store.set(a,b)},this.isSet=function(a){return this.store.isSet(a)}}function i(a){var b=Chatstack.statusMode;if(Chatstack.statusMode=a,b!==a){var c={status:a};Chatstack.events.trigger("StatusModeChanged",c)}}function j(a,b){var c=Chatstack.chatState;if(Chatstack.chatState=a,c!==a){var d={state:a};b&&(d.user=b),Chatstack.events.trigger("ChatStateChanged",d)}}function k(a,b,c){var d=Chatstack.initiateChatState;if(Chatstack.initiateChatState=a,d!==a){var e={state:a};b&&(e.message=b),c&&(e.image=c),Chatstack.events.trigger("InitiateChatStateChanged",e)}}function l(){"undefined"!=typeof d&&($a=f.extend($a,d)),$a.cookie!==g&&"number"==typeof $a.cookie.expires&&(lb.expires=$a.cookie.expires),$a.account!==g&&36===$a.account.length&&f.each(Wa,function(a,b){b.indexOf($a.account)<0&&(b.indexOf("api/")>-1?Wa[a]=b.replace("api/","api/"+$a.account+"/"):Wa[a]=$a.account+"/"+b)}),-1===$a.server.indexOf("http://")&&-1===$a.server.indexOf("https://")?$a.server=$a.protocol+$a.server:$a.server=$a.protocol+Xa}function m(a){wb.emit("close",{origin:wb.origin,master:sb}),$a.visitorTracking=!1}function n(b){var c=e.findWhere(rb,{origin:b.origin});if(c===g){var d={origin:b.origin,timer:!1,master:b.master,time:b.time},f=e.sortedIndex(rb,d,"time");rb.splice(f,0,d)}else c.timer!==!1&&(a.clearTimeout(c.timer),c.timer=!1),c.master=b.master,c.time=b.time}function o(h){var i={JSON:""};mb.session!==g&&mb.session.length>0&&(i.SESSION=mb.session),d!==g&&d.locale!==g&&(i.LANGUAGE=d.locale.toLowerCase()),d!==g&&d.template!==g&&(i.TEMPLATE=d.template),$a.department!==g&&$a.department.length>0&&(i.DEPARTMENT=$a.department),f.ajax({url:$a.server+Va+Wa.settings,data:f.param(i),success:function(d,i,k){nb=d,d.error||$a.disabled||($a.connected=nb.connected,!$a.popup||$a.connected||"Offline"===nb.status||nb.loginDetails||($a.connected=!0),$a.connected&&j("waiting"));var l=!1;if($a.embedded!==!1&&(d.html&&d.html.length>0&&(nb.html=d.html,l=f(nb.html).appendTo(b.body)),l=f(Ya+"Embedded"),Bb()),!d.error){if($a.visitorTracking=null!=$a.visitorTracking&&$a.visitorTracking===!1?!1:nb.visitor.enabled,$a.visitorRefresh=nb.visitor.refresh!==g?1e3*nb.visitor.refresh:15e3,"Online"!==nb.status)if($a.feedbackDelay>0)fa();else{var m=e.throttle(fa,100);f(a).scroll(m)}$a.introduction||($a.introduction=nb.introduction),nb.initiate.delay>0&&($a.initiateDelay=1e3*nb.initiate.delay)}if($a.feedback&&"Online"!==nb.status&&l!==!1&&!ob.store.get("feedback")&&(l.addClass("feedback"),$a.connected||ga(!0,!0)),!d.error){$a.embedded!==!1&&(d.error||$a.feedback&&"Online"!==d.status&&!ob.store.get("feedback")?(Sb(),l.addClass("signup-collapsed"),"function"==typeof initSetup&&initSetup(l,d),$a.connected||U("Offline")):l=f(Ya+"Embedded")),Chatstack.statusChanged&&Chatstack.statusChanged(nb.status);var n=!1;if($a.popup&&$a.session.length>0?n=$a.session:nb.session.length>0&&(n=nb.session),Ab(n),$a.language===g||f.isEmptyObject($a.language)||(nb.language=f.extend(nb.language,$a.language)),pb.websockets===g&&ha(),$a.sprite="default"===$a.template&&$a.sprite===!1?!0:$a.sprite,""!==nb.offlineRedirect&&/^(?:^[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+@[\-!#$%&'*+\\\/0-9=?A-Z\^_`a-z{|}~]+\.[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+$)$/i.test(nb.offlineRedirect)&&(nb.offlineRedirect="mailto:"+nb.offlineRedirect),$a.personalised){var o=nb.embeddedinitiate;o.id>0&&z(o.id,o.name,o.department,o.avatar)}nb.initiate.enabled&&!$a.connected&&ga($a.initiateDelay>0?!1:!0),f(b).trigger(c+".SettingsUpdated",nb),nb.smilies?f(Ya+"SmiliesButton").show():f(Ya+"SmiliesButton").hide(),q(),p(nb.departments),h&&h(),nb.user.length>0&&f(Ya+"NameInput").val(nb.user),nb.email!==!1&&nb.email.length>0&&f(Ya+"EmailInput").val(nb.email),nb.department.length>0&&f(Ya+"DepartmentInput").val(nb.department)}},error:function(a,b,c){403===a.status&&(mb.session="",o())},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}function p(a){var b="DepartmentInput",c="",d=f(Ya+b);if(a===g&&nb.departments!==g&&(a=nb.departments),a.length>0){var e=d.find("option");f.each(e,function(c,d){d=f(this).val(),d.length>0&&f.inArray(d,a)<0&&f(Ya+b+' option[value="'+d+'"]').remove()});var h=0,i=!1;f.each(a,function(a,b){($a.departments===g||$a.departments!==g&&$a.departments.length>0&&f.inArray(b,$a.departments)>-1)&&(d.find('option[value="'+b+'"]').length||(i=nb.language.departments[b]!==g?nb.language.departments[b]:b,c+='<option value="'+b+'">'+i+"</option>"),h+=1)}),h>0?(c.length>0&&(d.find('option[value=""]').length||(c='<option value=""></option>'+c),d.append(c)),0===$a.department.length&&f(Ya+"DepartmentLabel").show()):f(Ya+"DepartmentLabel").hide()}else f(Ya+"DepartmentLabel").hide()}function q(){eb.left=(a.screen.width-nb.popupSize.width)/2,eb.top=(a.screen.height-nb.popupSize.height)/2,fb="height="+nb.popupSize.height+",width="+nb.popupSize.width+",top="+eb.top+",left="+eb.left+",resizable=1,toolbar=0,menubar=0"}function r(){if(ob.data.notificationEnabled){if(ab>0){var a=ab>99?"...":ab;f(Ya+"Notification span").text(a)}Oa!==g&&ob.data.soundEnabled&&ob.data.notificationEnabled&&Oa.play()}}function s(){ob.store.set(c,ob.data)}function t(){ab>0&&(ab=0),s(),f(Ya+"Notification").fadeOut(250)}function u(){f("<img />").load(function(){f('<link href="'+$a.server+Ua+"templates/"+$a.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head")}).attr("src",$a.server+Ua+"images/Sprite.png")}function v(a,b){nb.blocked!==g&&0!==nb.blocked&&Ha();var d=f(Ya+"Embedded");if((d.is(".closed")||d.is(".hidden")||$a.popup)&&$a.embedded===!0){if($a.sprite===!0&&u(),Oa===g&&(Oa=new buzz.sound($a.server+Ua+"sounds/New Message",{formats:["ogg","mp3","wav"],volume:100})),ab=0,t(),Ja(),0!==nb.loginDetails||b){f(Ya+"InitiateChatBubble").fadeOut(150);var e="opened",h="closed";$a.disabled?e+=" hidden":(d.show(),h+=" hidden"),d.removeClass(h).addClass(e),R(),e="show",$a.disabled&&(e+=" hidden"),f("."+c+"MobileButton").removeClass("hide").addClass(e),f("body").addClass(c+"Opened"),ob.data.tabOpen=!0,s()}else{if(!nb.initiate.enabled||$a.connected!==!1)return void Z();ea(!0)}f(Ya+"CloseButton").removeClass("expand").addClass("collapse"),a&&a()}}function w(a){var b=f(Ya+"Embedded");b.height()-35;if(!b.is(".signup")&&!$a.popup){if(f(Ya+"SmiliesButton").close(),b.is(".opened")){R();var d=b.is(".sidebar")||!$a.popup&&($a.hidden||$a.disabled)?"hidden":"closed";b.removeClass("opened").addClass(d),f("body").removeClass(c+"Opened"),ob.data.tabOpen=!1,s()}a&&a.call();var e=!0;b.is(".offline")&&$a.sidebar?(b.addClass("hidden"),ea(!1,nb.language.offlinemessagedescription)):"Online"===nb.status||$a.connected||(e=!1),($a.disabled||$a.hidden||b.is(".feedback"))&&(e=!1),f("."+c+"MobileButton").removeClass(e?"hidden":"show").addClass(e?"show":"hidden"),f(Ya+"CloseButton").removeClass("collapse").addClass("expand"),b.attr("data-opened")&&X("Declined")}}function x(){var a=f(Ya+"Body"),b=parseInt(a.css("top"),10);86===b&&(a.animate({top:36},500,"swing",function(){f(Ya+"CollapseButton").removeClass("Collapse").addClass("Expand").attr("title",nb.language.expand)}),f(Ya+"Embedded").addClass("no-op")),ob.data.operatorDetailsOpen&&(ob.data.operatorDetailsOpen=!1,s())}function y(a,b,c,d,e,g){var h=$a.server+Va+Wa.image,i=120,k=h+"?"+f.param({id:a,size:i,round:""}),l=function(a,b,c,e,g){return function(){var h=CryptoJS.SHA1(a.toString()).toString();if(ub[h]=e,f(d+", "+Ya+"Messages .avatar."+h+", "+Ya+"InitiateChatBubble:not(.feedback) .operator.photo").css({"background-image":'url("'+e+'")',"background-repeat":"no-repeat"}),g){var i={id:a,name:b,department:c,image:e};j("connected",i)}}};if(e.length>0){var m="https://secure.gravatar.com/avatar/"+e+"?s="+i+"&r=g&d=404";f("<img />").one("error",l(a,b,c,k,g)).one("load",l(a,b,c,m,g)).attr("src",m)}}function z(a,b,d,e,h,i){if(a!==g&&b!==g&&b.length>0&&$a.connected&&!f("."+c+"Operator").is(":visible")){if(f(Ya+"Embedded").addClass("connected"),f(Ya+"Typing span, "+Ya+"TypingPopup span").text(b+" "+nb.language.istyping),ob.data.operatorDetailsOpen||(ob.data.operatorDetailsOpen=!0,s()),d!==g&&d.length>0){var j=d.split(";");f.each(j,function(a,b){return f.trim(b)===f.trim($a.department)?void(d=f.trim(b)):void 0})}var k=(f(Ya+"Scroll"),d!==g?d:ob.data.department);$a.chatBubbles?(f("."+c+"Operator").show(),f(Ya+"StatusText").css("left","70px"),Cb(),y(a,b,d,"."+c+"Operator .OperatorImage, "+Ya+"Messages .InitiateChat .avatar",e,!0),f(Ya+"CollapseButton").hide(),$a.colors!==g&&$a.chatBubbles!==!1&&$a.colors.image!==g&&$a.colors.image.border!==g&&f(Ya+"Embedded").css("border",$a.colors.image.border)):($a.operator&&(a=$a.operator.id,b=$a.operator.firstname,e=$a.operator.hash),y(a,b,d,Ya+"OperatorImage, "+Ya+"Messages .InitiateChat .avatar",e,!0),f(Ya+"OperatorName").text(b),h!==g&&(b=nb.language.chattingwith+" "+b),f(Ya+"Messages .InitiateChat .name").text(b),f(Ya+"OperatorDepartment").text(k));var l=parseInt(f(Ya+"Body").css("top"),10);36===l&&f(Ya+"Body").animate({top:86},500,"swing",function(){f(Ya+"CollapseButton").removeClass("Expand").addClass("Collapse").attr("title",nb.language.collapse)})}}function A(){var a=f(Ya+"Scroll"),b=f(Ya+"Body"),c=parseInt(b.css("top"),10);86===c&&a.get(0).scrollHeight>a.height()&&f(Ya+"CollapseButton").click()}function B(){var a=ob.data.soundEnabled?"SoundOn":"SoundOff",b=f(Ya+"SoundToolbarButton");b.length>0&&b.removeClass("SoundOn SoundOff").addClass(a)}function C(){var a=ob.store.get(c),b=f(Ya+"Embedded"),d=f(Ya+"InitiateChatBubble").is(":visible");a!==g?(ob.data=a,(b.length>0&&!d&&$a.connected||$a.popup)&&Db(),ob.data.soundEnabled!==g?B():ob.data.soundEnabled=!0,$a.connected||(ob.data.operatorDetailsOpen!==g&&ob.data.operatorDetailsOpen?z():x())):b.length>0&&Db()}function D(){var a=f(Ya+"Scroll");a&&a.scrollTo(f(Ya+"MessagesEnd"))}function E(a){function b(a,c){return a.match(c.regex)?b(a.replace(c.regex,' <span title="'+c.css+'" class="sprite '+c.css+' Small Smilie"></span> '),c):a}if(nb.smilies)for(var c=[{regex:/^<p>:D<\/p>$|^<p>:D | :D | :D<\/p>$/g,css:"Laugh"},{regex:/^<p>:\)<\/p>$|^<p>:\) | :\) | :\)<\/p>$/g,css:"Smile"},{regex:/^<p>:\(<\/p>$|^<p>:\( | :\( | :\(<\/p>$/g,css:"Sad"},{regex:/^<p>\$\)<\/p>$|^<p>\$\) | \$\) | \$\)<\/p>$/g,css:"Money"},{regex:/^<p>&gt;:O<\/p>$|^<p>&gt;:O |^>:O | &gt;:O | >:O | &gt;:O$| >:O<\/p>$/g,css:"Angry"},{regex:/^<p>:P<\/p>$|^<p>:P | :P | :P<\/p>$/g,css:"Impish"},{regex:/^<p>:\\<\/p>$|^<p>:\\ | :\\ | :\\<\/p>$/g,css:"Sweat"},{regex:/^<p>8\)<\/p>$|^<p>8\) | 8\) | 8\)<\/p>$/g,css:"Cool"},{regex:/^<p>&gt;:L<\/p>$|^<p>&gt;:L |^>:L | &gt;:L | >:L | &gt;:L$| >:L<\/p>$/g,css:"Frown"},{regex:/^<p>;\)<\/p>$|^<p>;\) | ;\) | ;\)<\/p>$/g,css:"Wink"},{regex:/^<p>:O<\/p>$|^<p>:O | :O | :O<\/p>$/g,css:"Surprise"},{regex:/^<p>8-\)<\/p>$|^<p>8-\) | 8-\) | 8-\)<\/p>$/g,css:"Woo"},{regex:/^<p>8-O<\/p>$|^<p>8-O | 8-O | 8-O<\/p>$/g,css:"Shock"},{regex:/^<p>xD<\/p>$|^<p>xD | xD | xD<\/p>$/g,css:"Hysterical"},{regex:/^<p>:-\*<\/p>$|^<p>:-\* | :-\* | :-\*<\/p>$/g,css:"Kissed"},{regex:/^<p>:S<\/p>$|^<p>:S | :S | :S<\/p>$/g,css:"Dizzy"},{regex:/^<p>\+O\)<\/p>$|^<p>\+O\) | \+O\) | \+O\)<\/p>$/g,css:"Celebrate"},{regex:/^<p>&lt;3<\/p>$|^<p><3$|^&lt;3|^<3 | &lt;3|<3 | &lt;3<\/p>$| <3$/g,css:"Adore"},{regex:/^<p>zzZ<\/p>$|^<p>zzZ | zzZ | zzZ<\/p>$/g,css:"Sleep"},{regex:/^<p>:X<\/p>$|^<p>:X | :X | :X<\/p>$/g,css:"Stop"},{regex:/^<p>X-\(<\/p>$|^<p>X-\( | X-\( | X-\(<\/p>$/g,css:"Tired"}],d=0;d<c.length;d++){var e=c[d];a=f.trim(a),a=b(a,e)}return f.trim(a)}function F(b){if($a.embedded){var c=f("body");f(".chatstack-featherlight-inner");kb.length?kb.attr("src",b):f.featherlight(c,{iframe:b,iframeMaxWidth:"calc(95% - 300px)",iframeWidth:"100%",iframeHeight:"100%",onResize:function(){f(".chatstack-featherlight-inner").css("height",f(".chatstack-featherlight-content").height())},beforeOpen:function(){c.css("overflow","hidden")},beforeClose:function(){c.css("overflow","auto")}})}else{var d=a.opener;d&&(d.location.href=b,d.focus())}}function G(a){a=a.replace(/([a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9]@[a-z0-9][a-z0-9_\.\-]{0,}[a-z0-9][\.][a-z0-9]{2,4})/g,'<a href="mailto:$1" class="message-email">$1</a>'),a=a.replace(/((?:(?:http(?:s?))|(?:ftp)):\/\/[^\s|<|>|'|\"]*)/g,'<a href="$1" target="_blank" class="message-link">$1</a>');var b=new marked.Renderer;return b.list=function(a,b){return a},b.listitem=function(a){return a},marked.setOptions({renderer:b,gfm:!1,tables:!1,smartLists:!1}),a=marked(a),nb.smilies&&(a=E(a)),a}function H(a){var d="",e=f(Ya+"Messages"),h=!1,i=!1,j=a.datetime,k=a.username;if(a.firstname!==g&&a.firstname.length>0&&(k=a.firstname),!isNaN(parseInt(a.id,10))&&f(".flex[data-id="+a.id+"]").length>0?i=!0:f(b).trigger(c+".message.contentRead",{message:a.id}),e&&null!==a.content&&!ob.data.chatEnded&&!i){var l="left",m="#000",n="";if(-1===a.id&&$a.initiate)return ea(!1,a.content),!1;if(-2===a.id)return f(Ya+"Waiting, "+Ya+"Connecting").fadeOut(250),ob.data.operatorDetailsOpen!==g&&ob.data.operatorDetailsOpen&&z(),Rb!==g&&Rb.length>0&&0!==nb.loginDetails&&(Da(Rb[0]),Rb=[]),!1;2===a.align?l="center":3===a.align&&(l="right"),0===a.status&&(m="#666"),ob.data.chatEnded||$a.chatBubbles||f(Ya+"CollapseButton").fadeIn(250),nb.rtl===!0&&(n="; text-align: right"),j===g&&(j=a.id);var o="message",p="flex",q=15,r="",s="";if(a.id<-1&&(p+=" left none"),$a.messageBubbles&&a.id>=-1)if(o="message bubble ",q=0,m="#000",1===a.status||2===a.status||3===a.status||7===a.status||8===a.status?(o+="left",p+=" left"):(o+="right",p+=" right"),a.from&&!Gb){var t=CryptoJS.SHA1(a.from.toString()).toString();ub[t]&&(r="background-image: url("+ub[t]+")"),s=" "+t}else o+=" noarrow";var u="";a.id>=-1&&a.status>0&&5!==a.status?(Gb||(p+=" grouped",u='<div class="name">'+k+"</div>"),Gb=!0):Gb=!1;var v="";if(8===a.status&&(o+=" joined",v=a.hash),d+='<div class="'+p+'" data-id="'+a.id+'" data-datetime="'+j+'"><div class="avatar'+s+'" style="'+r+'"></div>'+u+'<div class="'+o+'" data-hash="'+v+'" style="color:'+m+n+'">',0===a.status||1===a.status||2===a.status||7===a.status||8===a.status){if(f(Ya+'Messages .message.joined[data-hash="'+v+'"]').length)return"";k!==g&&"string"==typeof k&&k.length>0&&($a.messageBubbles||(d+=k+" "+nb.language.says+":<br/>"),a.status>0&&(db=k)),"left"===l&&nb.rtl===!0&&(l="right"),h=G(a.content);var w=/^.*((youtu.be\/)|(v\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/i,x=w.exec(h),y=e.width();if(null!==x&&x.length>6){var A=x[6];if(l="left",2===a.status){var B={width:260,height:195},C="message-video fancybox.iframe",D="embed/",H="self";$a.popup&&(B={width:480,height:360},C="message-video-popup",D="watch?v=",H="blank"),h='<a href="http://www.youtube.com/'+D+A+'" target="_'+H+'" class="'+C+'"><div style="position:relative; height:'+B.height+"px; margin:5px; color: "+m+'"><div class="'+c+'VideoZoom noresize" style="position:absolute; opacity:0.5; top:0px; z-index:150; background:url('+$a.server+Ua+"images/Play.png) center center no-repeat; max-width:"+B.width+"px; width:"+B.width+"px; height:"+B.height+'px"></div><div class="'+c+'VideoHover noresize" style="position:absolute; top:0px; z-index:100; background:#fff; opacity:0.25; max-width:'+B.width+"px; width:"+B.width+"px; height:"+B.height+'px"></div><div style="position:absolute; top:0px;"><img src="http://img.youtube.com/vi/'+A+'/0.jpg" alt="YouTube Video" class="noresize" style="width:'+B.width+"px; max-width:"+y+'px"></div></div></a>';
}else h=h.replace(/((?:(?:http(?:s?))|(?:ftp)):\/\/[^\s|<|>|'|\"]*)/g,'<a href="$1" target="_blank" class="message-link fancybox.iframe">$1</a>'),h=E(h),h='<div style="text-align: '+l+"; margin-left: "+q+"px; color: "+m+'">'+h+"</div>";d+=h}else d+='<div style="text-align: '+l+"; margin-left: "+q+"px; color: "+m+'">'+h+"</div>"}else if(3===a.status){h=a.content.replace(/((?:(?:http(?:s?))):\/\/[^\s|<|>|'|\"]*)/g,'<img src="$1" alt="Received Image">');var I=h.match(/((?:(?:http(?:s?))):\/\/[^\s|<|>|'|"]*)/g);null!==I?(""!==k&&(d+=k+" "+nb.language.says+":<br/>"),f("<img />").load(Fb(a.id)).attr("src",I)):d+=h}else if(4===a.status)F(a.content),d+='<div style="margin-top:5px">'+nb.language.pushedurl+', <a href="'+a.content+'" target="_blank" class="message">'+a.content+"</a> "+nb.language.opennewwindow+"</div>";else if(5===a.status){try{new Function(a.content)(a)}catch(J){console.log("JavaScript Command Error: "+J),console.log(a.content)}d=""}else 6===a.status&&(d+=nb.language.sentfile+' <a href="'+a.content+'" target="'+c+'FileDownload">'+nb.language.startdownloading+"</a> "+nb.language.rightclicksave);d.length&&(d+="</div></div>"),f(Ya+"Waiting, "+Ya+"Connecting").fadeOut(250),nb.offlineEmail&&f(Ya+"Continue").length>0&&f(Ya+"Continue").hide()}return d}function I(){function c(){var a=d?cb:db+" messaged you";f(b).attr("title",a),d=!d}var d=!1;null===Pa&&(Pa=a.setInterval(c,2e3))}function J(){a.clearInterval(Pa),Pa=null,cb.length>0&&f(b).attr("title",cb)}function K(a){var b=a.typing!==g?a.typing:!1,c=f(Ya+"Typing, "+Ya+"TypingPopup");b?c.show():c.hide()}function L(b){var d="",e=!1,h=[25,25,25,25];if(f.each(b,function(a,b){var c=H(b);c&&(d+=c),e=b,b.status>0&&ab++}),d.length>0){ob.data.chatEnded||$a.chatBubbles||f(Ya+"CollapseButton").fadeIn(250),f(Ya+"Messages").append(d);var i=Ya+"Messages .flex.left.grouped";f(i+".last").removeClass("last"),f(i+":last").addClass("last"),f(Ya+"Messages .flex:not(.initiate), "+Ya+"Messages "+Ya+"Continue").sort(function(a,b){return a=parseInt(f(a).data("datetime"),10),b=parseInt(f(b).data("datetime"),10),b>a?-1:a>b?1:0}).appendTo(Ya+"Messages"),A(),$a.popup||(h=[25,405,25,25]),f(".message-link, .message-video").fancybox({openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",margin:h}),f("."+c+"VideoZoom").hover(function(){f("."+c+"VideoHover").fadeTo(250,0),f(this).fadeTo(250,1)},function(){f("."+c+"VideoHover").fadeTo(250,.25),f(this).fadeTo(250,.75)}),D(),!a.isActive&&_a>0&&I(),e!==!1&&e.id>ob.data.lastMessage&&(!ob.data.chatEnded&&f(Ya+"Embedded").is(".closed")?ab>0&&r():(ab=0,Oa!==g&&!ob.data.chatEnded&&ob.data.soundEnabled&&($a.popup||ob.data.notificationEnabled)&&Oa.play()))}if(e!==!1){e.id>0&&(_a=e.id);f(Ya+"Embedded.closed").length;e.status>0&&4!==e.status&&5!==e.status&&ba(e.content),e.id>ob.data.lastMessage&&(ob.data.lastMessage=e.id,s())}}function M(){if(ob.data.chatEnded)return void a.setTimeout(M,1500);if($a.connected&&nb.language!==g){var d={TIME:f.now(),LANGUAGE:nb.locale,MESSAGE:_a};1===bb&&(d.TYPING=bb),mb.session!==g&&mb.session.length>0&&(d=f.extend(d,{SESSION:mb.session}),Hb===!1&&f(b).trigger(c+".UpdatingMessages",nb)),f.jsonp({url:$a.server+Va+Wa.messages+"?callback=?",data:f.param(d),success:function(b){Hb=!0,null!==b&&""!==b?(b.messages!==g&&b.messages.length>0&&f(Ya+"Messages").length&&L(b.messages),K(b)):K(!1),qb===!1&&a.setTimeout(M,1500)},error:function(){qb===!1&&a.setTimeout(M,1500)}}),Tb&&Tb()}else Hb===!1&&qb===!1&&a.setTimeout(M,1500)}function N(){var a=f(Ya+"Embedded");f(Ya+"SignIn").hide(),f(Ya+"SignedIn").show(),f(Ya+"Messages .flex[data-id=-2]").length||f(Ya+"Waiting").show(),f(Ya+"Body, "+Ya+"Background").css("background-color","#fff"),f(Ya+"Input").animate({bottom:0},500),a.is(":hidden")&&(f(Ya+"Waiting, "+Ya+"Connecting").hide(),a.fadeIn(50),C())}function O(){if(!ob.data.chatEnded)if($a.connected&&xa(),f(Ya+"SignIn").is(":visible"))$a.sprite===!0?f("<img />").load(function(){f('<link href="'+$a.server+Ua+"templates/"+$a.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head"),N()}).attr("src",$a.server+Ua+"images/Sprite.png"):N();else{var a=f(Ya+"Embedded"),b=ob.data.tabOpen,c=b?"opened":"closed",d=b?"closed hidden":"opened";!$a.popup&&($a.hidden&&"closed"===c||$a.disabled)&&(c="hidden"),$a.disabled&&(d=d.replace(" hidden","")),$a.popup&&("Online"===nb.status||$a.connected)&&(d="closed",c="opened"),a.removeClass(d).addClass(c).show().attr("data-opened",!!b),ob.data.tabOpen=!!b,s()}}function P(){var a="Rating",b="#"+c+a,d=[{css:"good",title:"Good",rating:3},{css:"poor",title:"Poor",rating:1}];if(0===f(b).length){d.sort(function(){return Math.round(Math.random())-.5});var e='<div id="'+c+"Feedback"+a+'">'+nb.language.rateyourexperience+':<br/>     <div id="'+c+a+'" class="rating-container">       <div class="rating '+d[0].css+'" title="'+d[0].title+'" data-rating="'+d[0].rating+'"></div>       <div class="rating neutral" title="Neutral" data-rating="2"></div>       <div class="rating '+d[1].css+'" title="'+d[1].title+'" data-rating="'+d[1].rating+'"></div>     </div>   </div>';f(Ya+"MessagesEnd").prepend(e),d=f(b),d.find(".rating").click(function(){var a=f(this),b=f(this).attr("data-rating"),c={RATING:b};a.parent().find('.rating[data-rating!=" + score + "]').addClass("deselected"),a.removeClass("deselected"),mb.session!==g&&mb.session.length>0&&(c=f.extend(c,{SESSION:mb.session})),f.ajax({url:$a.server+Va+Wa.rating,data:f.param(c),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}),D()}else{var h=f(Ya+"FeedbackRating");h.is(":visible")?h.hide():(h.show(),f(Ya+"Scroll").scrollTo(h))}}function Q(){f("."+c+"Status").each(function(){var a=nb.status;"BRB"===a&&(a="Be Right Back"),f(this).attr("title","Live Chat - "+a).attr("alt","Live Chat - "+a)})}function R(){var a=f(Ya+"Embedded"),b=f(Ya+"StatusText"),c=f(Ya+"CloseButton"),d=f(Ya+"Tab"),e=b.position().left+b.width()+c.width()+30;a.is(".closed")&&b.width()>0?(d.css("width",e+2+"px"),a.css("width",e+"px")):d.css("width","100%")}function S(a,b){var d=f("."+c+"StatusIndicator");if(b===g&&(b=f(Ya+"Embedded")),a=T(a),b.find(Ya+"StatusText").text(a),(b.is(".closed")||b.is(".hidden"))&&R(),a===nb.language.online&&$a.personalised){var e=nb.embeddedinitiate;if(e.id>0)return void z(e.id,e.name,e.department,e.avatar)}else a!==nb.language.offline&&a!==nb.language.contactus||d.hide()}function T(a){switch(a){case"Offline":return nb.language.contactus;case"Online":return nb.language.online;case"BRB":return nb.language.brb;case"Away":return nb.language.away}}function U(a){var b=f(Ya+"Embedded");S(a,b),0!==nb.loginDetails&&b.find("."+c+"Operator .OperatorImage").hide(),b.find(".CloseButton").fadeOut(250),b.addClass("offline"),w()}function V(a,d){function e(){if(j.show(),$a.embedded===!0&&h.length>0&&(S("Online",h),h.find(".CloseButton").fadeIn(250),!(l||nb.initiate.enabled&&$a.initiateDelay))){var a="offline";$a.disabled||$a.hidden||$a.popup||h.is(".sidebar")||(a=" hidden"),h.removeClass(a).addClass("online"),$a.connected&&O()}k.is(".feedback.rating")&&(k.hide().removeClass("feedback rating"),h.removeClass("feedback"))}var h=f(Ya+"Embedded"),j=f("."+c+"Invite"),k=f(Ya+"InitiateChatBubble"),l=k.is(":visible");if(p(d),"Online"===a&&($a.offline||d!==!1&&$a.embedded&&!f(Ya+"DepartmentInput option").length||d!==!1&&nb.departments.length>0&&$a.department.length>0&&f.inArray($a.department,nb.departments)<0)&&(a="Offline"),f(".LiveHelpTextStatus").each(function(b,c){var d=T(a);f(this).text(d).attr("title",d)}),f(".LiveHelpButton").each(function(b,c){var d=T(a);f(this).attr("title",d)}),i(a.toLowerCase()),"Online"===a)if(Ib||d!==g||""===nb.status||nb.status===a)e();else{o(function(a,b,c){e()}),Ib=!0;var m="show";$a.disabled&&(m+=" hidden"),f("."+c+"MobileButton").removeClass("hide").addClass(m)}else Ib=!1,$a.connected&&j.hide(),h.is(".feedback")||k.is(".message")||h.is(".offline")||k.css("bottom",-k.outerHeight()).hide(),h.length>0&&($a.connected?e():$a.hideOffline===!0&&h.addClass("hidden")),"Online"!==a&&$a.hideOffline!==!0&&$a.connected===!1&&nb.offlineEmail&&U(a),h.is(".connected")||$a.hideOffline!==!0||f("."+c+"MobileButton").removeClass("show").addClass("hide"),"Online"!==a&&f(Ya+"InitiateChat").is(":visible")&&f(Ya+"InitiateChat").fadeOut();""!==nb.status&&nb.status!==a&&(f(b).trigger(c+".StatusModeChanged",[a]),Chatstack.statusChanged&&Chatstack.statusChanged(a),nb.status=a,f("."+c+"Status").each(function(){var b=nb.images[a.toLowerCase()];b!==g?f(this).attr("src",b):f(this).attr("src",nb.images.offline),Q()}))}function W(){var a=new Date;return a?a.getTimezoneOffset():""}function X(a,b,c){gb!==a&&(gb=a,ib>0&&(hb=!1,"Accepted"!==a&&"Declined"!==a||f(Ya+"InitiateChat").fadeOut(250),k(a.toLowerCase(),b,c),ha(!0)))}function Y(a,b){if(f(Ya+"Embedded").length){f(Ya+"SignIn").hide(),f(Ya+"SignedIn").show(),f(Ya+"Body, "+Ya+"Background").css("background-color","#fff"),f(Ya+"Input").animate({bottom:0},500);var c=$a.introduction;if(b&&(c=b),0===f(Ya+"Scroll .InitiateChat").length){var d='<div class="InitiateChat">   <div class="flex initiate">     <div class="name"></div>     <div class="avatar"></div>     <div class="'+($a.messageBubbles?"message bubble left":"message")+'" data-id="-1">       <div style="color: #000">'+c+"</div>     </div></div>   </div>";f(d).appendTo(Ya+"Messages")}f(Ya+"Waiting").hide();var e=nb.embeddedinitiate;e.id>0&&!$a.accepted&&z(e.id,e.name,e.department,e.avatar,!a)}}function Z(){var a=f(Ya+"Embedded"),b=a.find(Ya+"MessageTextarea");Y();var d="closed";$a.disabled&&(d+=" hidden"),$a.popup||a.removeClass("opened").addClass(d),f("body").removeClass(c+"Opened"),ob.data.operatorDetailsOpen=!0,s(),v(function(){setTimeout(function(){b.focus()},500)},!0),X("Opened"),a.attr("data-initiate",!0),a.attr("data-opened",!0)}function $(){var a=f(Ya+"InitiateChatBubble"),b=a.find("input"),c=a.find("textarea"),d=a.find(".text.content"),e=a.attr("data-question"),h=parseInt(f(Ya+"FeedbackRating .rating:not(.deselected)").attr("data-rating"),10),i={QUESTION:e,EMAIL:b.val(),MESSAGE:c.val(),SCORE:h,SESSION:mb.session,JSON:!0};f.ajax({url:$a.server+Va+Wa.feedback,data:f.param(i),success:function(b){if(b.result!==g&&b.result===!0){d.text("Thanks for the feedback!"),a.find(".feedback input, .feedback textarea").hide();var c=f(Ya+"InitiateChatBubble .bubble").outerHeight()+25+"px";a.animate({height:c},250,"swing"),ob.store.set("feedback",!0)}},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}function _(a){var b=f(Ya+"InitiateChatBubble"),d=f(Ya+"Embedded"),e=f("."+c+"MobileButton"),g="true"===b.attr("data-collapsed"),h=b.css("height"),i="65px",j=b.find(".bubble"),k=b.find(".close");g?(h=10,i=b.find(".bubble").outerHeight()+25+"px",k.show()):(h="-"+h,k.hide()),a&&"Online"!==nb.status?(d.removeClass("feedback").addClass("offline hidden"),b.removeClass("feedback rating opened").addClass("offline").css("height",""),b.find(".message.bubble").css("bottom",""),e.removeClass("hide").addClass("show"),ob.store.set("feedback",!0),b.find(".text.content").text(nb.language.offlinemessagedescription)):(j.animate({bottom:h},250,"swing"),b.attr("data-collapsed",!g).animate({height:i},250,"swing"),ob.data.feedbackOpen=g),s()}function aa(a){var b=f(Ya+"Embedded");if(!b.is(".opened")){a.find(".bubble, .feedback").on("click",function(a){return b.is(".feedback")?(a.preventDefault(),!1):void 0}),a.find("a").on("click",function(a){a.stopPropagation()}),a.on("click",Jb(!1)),a.find(".close").on("click",Jb(!0)),a.find(".feedback textarea").on("keypress",function(a){return 13===a.which?($(),!1):!0}),a.find(".brand").on("click",function(a){a.stopPropagation()});var d=a.is(".message");d&&a.show();var e=-f(Ya+"InitiateChatBubble").outerHeight(),g=f(Ya+"InitiateChatBubble .bubble").outerHeight()+25+"px",h=10,i="true"===a.attr("data-collapsed");ob.data.feedbackOpen||"Online"===nb.status||d||(h="-"+(parseInt(a.find(".bubble").outerHeight(),10)+parseInt(a.find(".bubble").css("margin-top"),10))+"px",g=a.css("height")+"px",i=!0,a.is(".offline")?h=0:a.find(".close").hide()),$a.sidebar&&a.is(".offline")&&(g="auto"),a.find(".bubble").animate({bottom:h},250,"swing"),a.attr("data-collapsed",i).animate({height:g},250,"swing"),$a.connected&&!d&&a.css("bottom",e),a.is(".offline")||$a.connected&&!d||(f("."+c+"MobileButton").removeClass("show").addClass("hide"),a.addClass("opened"))}}function ba(a){a.length>150&&(a=a.substr(0,150)+"...");var b=f(Ya+"InitiateChatBubble");b.find(".message.bubble .text").text(a),b.removeClass("feedback").addClass("message");var c=f(Ya+"Embedded");c.is(".opened")||c.removeClass("feedback").addClass("hidden"),aa(b)}function ca(a,b,c){f("<img />").one("error",function(){f(this).remove(),a.find(".operator.photo").css("background-image","url('"+$a.server+Va+Wa.image+"?size=150&round=true')"),b||aa(a)}).one("load",function(){f(this).remove(),a.find(".operator.photo").css("background-image","url('"+c+"')"),b||aa(a)}).attr("src",c)}function da(a){var b=f("."+c+"MobileButton"),d=b.find(".label");!f(Ya+"OfflineEmailInput").val().length&&!f(Ya+"OfflineMessageInput").val().length||a?(d.text(""),d.removeClass("send"),b.removeClass("send"),b.find(".icon").addClass("close")):(b.find(".icon").removeClass("close"),b.addClass("send"),d.text(nb.language.send),d.addClass("send"))}function ea(a,d,e){Y(a,d);var h=f(Ya+"Embedded"),i=f(Ya+"InitiateChatBubble"),j=$a.introduction,k=!1;if(0===i.length){var l=nb.embeddedinitiate,m=nb.language.copyright.length>0?" copyright":"";l.id>0&&(k="https://secure.gravatar.com/avatar/"+l.avatar+"?s=150&r=g&d=404"),nb.images.initiatechat!==g&&nb.images.initiatechat.length>0&&(k=nb.images.initiatechat),e&&(k=e),d&&(j=d),f.isArray($a.feedback)&&$a.feedback.length>0&&"Online"!==nb.status&&($a.feedback.sort(function(){return Math.round(Math.random())-.5}),j=$a.feedback[0]);var n=[{css:"good",title:"Good",rating:3},{css:"poor",title:"Poor",rating:1}];n.sort(function(){return Math.round(Math.random())-.5});var o="";h.is(".offline")&&(o="offline");var p='<div id="'+c+'InitiateChatBubble" class="'+o+'" data-collapsed="false"> <div class="message bubble right'+m+'"> <div class="top border"></div> <div class="intro">'+nb.language.feedbackintroduction+'</div> <div class="text content">'+j+'</div> <div class="feedback">   <input id="'+c+'FeedbackEmailInput" type="text" tabindex="100" placeholder="'+nb.language.enteryourfeedbackemail+'"/>   <textarea id="'+c+'FeedbackInput" type="text" tabindex="200" placeholder="'+nb.language.enteryourfeedback+'"></textarea>   <div class="needsupport hidden">'+nb.language.needsupport+'  <a href="#" target="_blank">'+nb.language.clickhere+'</a></div>   <div id="'+c+'FeedbackRating" class="rating-container">     <div class="rating '+n[0].css+'" title="'+n[0].title+'" data-rating="'+n[0].rating+'"></div>     <div class="rating neutral" title="Neutral" data-rating="2"></div>     <div class="rating '+n[1].css+'" title="'+n[1].title+'" data-rating="'+n[1].rating+'"></div>   </div> </div> <div class="offline">   <form method="post" id="OfflineMessageForm">     <div>       <input id="'+c+'OfflineNameInput" type="text" name="NAME" autocomplete="name" tabindex="100" placeholder="'+nb.language.enteryourofflinename+'"/>       <div id="NameError" title="Name Required" class="error sprite TickSmall"></div>     </div>     <div>       <input id="'+c+'OfflineEmailInput" type="text" name="EMAIL" autocomplete="email" tabindex="200" placeholder="'+nb.language.enteryourofflineemail+'"/>       <div id="EmailError" title="Email Required" class="error sprite TickSmall"></div>     </div>     <input id="'+c+'OfflineWebsiteInput" type="text" name="WEBSITE" autocomplete="none" tabindex="300"/>     <div>       <textarea id="'+c+'OfflineMessageInput" type="text" name="MESSAGE" tabindex="300" placeholder="'+nb.language.enteryourofflinemessage+'"></textarea>       <div id="MessageError" title="Message Required" class="error sprite TickSmall"></div>     </div>   </form> </div> <a href="https://www.chatstack.com" target="_blank" class="brand"><div></div></a> </div> <div class="operator photo"></div> <div class="operator badge">1</div> <div class="close" title="'+nb.language.close+'"><span class="icon">&#10005;</span><span class="text">'+nb.language.close+"</span></div> </div>";i=f(p).appendTo("body");var q=!1;if(h.is(".feedback")){i.addClass("feedback rating"),q=!0,nb.images.feedback!==g&&nb.images.feedback.length>0&&(k=nb.images.feedback);var r=!1;if(nb.supportaddress.length>0&&(-1!==nb.supportaddress.indexOf("https://")||-1!==nb.supportaddress.indexOf("http://"))){var s=i.find(".needsupport");r=!0,s.find("a").attr("href",nb.supportaddress),s.removeClass("hidden")}n=f(Ya+"FeedbackRating"),n.find(".rating").click(function(){var a=f(this),b="neutral",c="How can we improve?",d=parseInt(f(this).attr("data-rating"),10);switch(d){case 1:b="poor",c="Sorry to hear that.  Please let us know how we can improve.";break;case 3:b="good",c="That's great!  Please let us know if you have any feedback."}a.parent().find('.rating[data-rating!=" + score + "]').addClass("deselected"),a.removeClass("deselected"),i.removeClass("rating").addClass(b);var e="223px";r&&(e="241px"),i.css("height",e),a=i.find(".text.content"),i.attr("data-question",a.text()),i.find(".text.content").text(c)})}else i.removeClass("feedback"),a&&X("Waiting",j,k);f(b).trigger(c+".InitiateChatLoaded"),ca(i,q,k),a&&!$a.popup&&(h.removeClass("opened").addClass("closed hidden"),f("body").removeClass(c+"Opened"))}else d&&(j=d),i.is(".sent")||i.is(".feedback")||i.find(".text.content").text(j),i.find(Ya+"OfflineEmailInput, "+Ya+"OfflineMessageInput").on("change keyup input",function(){da()}),e&&(k=e,ca(i,!1,e)),a&&X("Waiting",j,k)}function fa(){var c=f(a).scrollTop(),d=f(b).height(),e=f(a).height(),g=c/(d-e)*100,h=f(Ya+"InitiateChatBubble");$a.feedbackDelay>0?setTimeout(Kb,1e3*$a.feedbackDelay):g>50&&h.is(".feedback")&&Kb()}function ga(a,b,c,d){function e(a){if($a.initiate&&(nb.status!==g&&"Online"===nb.status||a!==g)){var b=!1;nb.embeddedinitiate!==g&&null!=nb.embeddedinitiate&&(b=f(Ya+"Embedded"),$a.visitorTracking&&!f.data(b,"initiate")&&""===gb&&ea(!0,c,d))}}$a.initiateDelay>0&&!a?setTimeout(e,$a.initiateDelay):e(b,c,d)}function ha(d,e){if(clearTimeout(Ra),Sa=f.now()-jb,hb=Sa>54e5||ib>0&&d===g&&(qb===!1&&sb===!1||pb.websockets!==g&&qb===!0),$a.visitorTracking&&!hb){var h,i=f(b).attr("title").substring(0,150),j=(W(),b.location.protocol+"//"+b.location.host),k=$a.server+Va+Wa.visitor+"?callback=?",l={INITIATE:gb};if(h=b.referrer.substring(0,j.length)===j.location?"":b.referrer,$a.department!==g&&$a.department.length>0&&(l=f.extend(l,{DEPARTMENT:$a.department})),$a.referrer&&(h=$a.referrer),$a.useragent&&$a.useragent.length&&f.extend(l,{USERAGENT:$a.useragent}),0===ib||e!==g){var m=$a.url!==g?$a.url:b.location.href;l=f.extend(l,{TITLE:i,URL:m,REFERRER:h,WIDTH:a.screen.width,HEIGHT:a.screen.height,TIME:f.now()}),nb.visitor.server!==g&&(k=nb.visitor.server+Va+Wa.visitor+"?callback=?"),ib=1}var n=$a.plugin;if(n.length>0){var o=$a.name,p=$a.email;p!==g&&p.length>0&&(l=f.extend(l,{PLUGIN:n,CUSTOM:p})),o!==g&&o.length>0&&(l=f.extend(l,{NAME:o}))}else $a.name!==g&&$a.name.length>0&&$a.email!==g&&$a.email.length>0&&(l=f.extend(l,{PLUGIN:"Internal",CUSTOM:$a.email,NAME:$a.name}));pb.websockets!==g&&pb.websockets.state!==g&&pb.websockets.state.length>0&&(l=f.extend(l,{WEBSOCKETS:pb.websockets.state})),mb.session!==g&&(l=f.extend(l,{SESSION:mb.session})),l=f.toJSON(l),l=Base64.encode(l),f.jsonp({url:k,data:{DATA:l},success:function(d){if(null!==d&&""!==d){if(d.session!==g&&d.session.length>0&&(Lb(d.session),f(b).trigger(c+".VisitorLoaded",d)),d.status!==g&&d.status.length>0&&V(d.status,d.departments),d.initiate&&d.initiate.enabled&&!$a.initiateDelay&&!$a.connected)if((d.initiate.avatar||d.initiate.image&&d.initiate.image.length)&&d.initiate.message&&d.initiate.message.length>0){var e=d.initiate.image;-1===e.indexOf("https://")&&-1===e.indexOf("data:image/png;base64,")&&(e="https://secure.gravatar.com/avatar/"+d.initiate.avatar+"?s=120&r=g&d=404"),ga(!0,!1,d.initiate.message,e)}else ga(!0);d.chat!==g&&d.chat>0&&f(b).trigger(c+".Connecting",d).trigger(c+".Connected",d)}0===ib&&(ib=1),Ra=a.setTimeout(ha,$a.visitorRefresh)},error:function(){Ra=a.setTimeout(ha,$a.visitorRefresh)}})}else Ra=a.setTimeout(ha,$a.visitorRefresh)}function ia(a,b){b=b.replace(/(\[|\])/g,"\\$1");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function ja(){var a="Offline";f("."+c+a+"Form").hide(),f("."+c+a+"Sent").show(),$a.embedded&&f("."+c+a+"PoweredBy").css("right","150px"),f(Ya+a+"Heading").html(nb.language.thankyoumessagesent).fadeIn(250),f(b).trigger("LiveHelp.ContactComplete")}function ka(a){var b="Offline",d="#"+c+b,e=f("#"+b+"MessageForm"),h=e.serialize();$a.security.length>0&&(h+="&SECURITY="+encodeURIComponent($a.security)),mb.session!==g&&mb.session.length>0&&(h+="&SESSION="+encodeURIComponent(mb.session)),$a.template!==g&&$a.template.length>0&&(h+="&TEMPLATE="+encodeURIComponent($a.template)),h+="&JSON",f.ajax({url:$a.server+Va+Wa.offline,data:h,dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}).done(function(b){var c=f(d+"Button");c.length&&c.removeAttr("disabled");var e=!1;b.result!==g&&b.result===!0?(ja(),e=!0):(b.type!==g&&("EMAIL"===b.type&&f("#EmailError").removeClass("TickSmall").addClass("CrossSmall").fadeIn(250),"CAPTCHA"===b.type&&f("#SecurityError").removeClass("TickSmall").addClass("CrossSmall").fadeIn(250)),b.error!==g&&b.error.length>0?(f(d+"Description").hide(),f(d+"Error span").html("Error: "+b.error).parent().fadeIn(250)):(f(d+"Error").fadeIn(250),f(d+"Heading").text(nb.language.offlineerrortitle),f(d+"Description").hide())),a&&a(e)})}function la(a,b){return b?(f(a).removeClass("CrossSmall").addClass("TickSmall").fadeIn(250),!0):(f(a).removeClass("TickSmall").addClass("CrossSmall").fadeIn(250),!1)}function ma(a,b){var c=a instanceof f?a.val():f(a).val(),d=""===f.trim(c);return la(b,!d)}function na(a,b){var c=a instanceof f?a.val():f(a).val(),d=f.trim(c).length>0&&/^[\d| |-|.]{3,}$/.test(c);return la(b,d)}function oa(a,b){var c=a instanceof f?a:f(a),d=c.val(),e=c.attr("data-verify"),h=/^[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+@[\-!#$%&'*+\\\/0-9=?A-Z\^_`a-z{|}~]+\.[\-!#$%&'*+\\.\/0-9=?A-Z\^_`a-z{|}~]+$/i.test(d)&&(e!==g&&e.length>0&&e===CryptoJS.SHA1(d).toString()||!d.length||e===g);return la(b,h)}function pa(a,b,c){function d(){f.ajax({url:$a.server+Va+Wa.security,data:f.param(k),success:function(a){var d="";if(a.result!==g&&a.result===!0?(f(b).removeClass(h).addClass(i).fadeIn(250),c&&c()):d="CAPTCHA",d.length>0&&(f(b).removeClass(i).addClass(h).fadeIn(250),c)){f("#OfflineMessageForm").find(":input[id="+d+"], textarea[id="+d+"]")}},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}var e=a instanceof f?a:f(a),h="CrossSmall",i="TickSmall",j=e.val(),k={SECURITY:$a.security,CODE:j,JSON:"",EMBED:""},l=$a.security.substring(16,56);return e.length>0?5!==j.length?(j.length>5&&e.val(j.substring(0,5)),f(b).removeClass(i).addClass(h).fadeIn(250),!1):40===l.length?l===CryptoJS.SHA1(j.toUpperCase()).toString()?(f(b).removeClass(h).addClass(i).fadeIn(250),c&&c(),!0):!1:void d(c):(c&&c(),!0)}function qa(a,b){var c=a.find(":input[name=NAME]"),d=(a.find("select[id=COUNTRY]"),a.find(":input[id=TELEPHONE]"));c.length&&!ma(c,"#NameError")||oa(a.find(":input[name=EMAIL]"),"#EmailError")&&ma(a.find("textarea[name=MESSAGE]"),"#MessageError")&&(d.length&&!ma(d,"#TelephoneError")||pa(a.find(":input[name=CAPTCHA]"),"#SecurityError",function(){b.call()}))}function ra(){var a=f("#OfflineMessageForm");qa(a,ka)}function sa(a,b){null!==mb.session&&Pb(mb.session),b.find(":input[id=CAPTCHA]").val(""),f.ajax({url:$a.server+Va+Wa.security,data:{RESET:"",JSON:""},success:function(b){if(b.captcha!==g){$a.security=b.captcha;var c="";$a.security.length>0&&(c="&"+f.param(f.extend(c,{SECURITY:encodeURIComponent($a.security),RESET:"",EMBED:""}))),f(a+"Security").attr("src",$a.server+Va+Wa.security+"?"+f.now()+c)}},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}),f("#SecurityError").fadeOut(250)}function ta(b,c,d){f(c+"Button, "+c+"CloseButton").hover(function(){f(this).toggleClass(b+"Button "+b+"ButtonHover")},function(){f(this).toggleClass(b+"Button "+b+"ButtonHover")}),f(c+"SecurityRefresh").click(function(){sa(c,d)}),f(c+"Button").click(function(){ra(),f(this).attr("disabled","disabled")}),"Offline"===b?f(c+"CloseButton").click(function(){f.fancybox.close()}):f(c+"CloseButton").click(function(){"Online"===nb.status||$a.connected?f(this).is(".expand")?v(!1,!1):w():wa()}),f(c+"CloseBlockedButton").click(function(){$a.embedded?w():$a.popup&&a.close()}),d.find(":input[id=NAME]").bind("keydown blur",function(){ma(this,"#NameError")}),d.find(":input[id=EMAIL]").bind("keydown blur",function(){oa(this,"#EmailError")}),d.find("textarea[id=MESSAGE]").bind("keydown blur",function(){ma(this,"#MessageError")}),d.find("select[id=COUNTRY]").bind("keydown blur",function(){ma(this,"#CountryError")}),d.find(":input[id=TELEPHONE]").bind("keydown blur",function(){na(this,"#TelephoneError")}),d.find(":input[id=CAPTCHA]").bind("keydown",function(){f(this).val().length>5&&f(this).val(f(this).val().substring(0,5))}).bind("keyup",function(){pa(this,"#SecurityError")});var e=d.find("#MESSAGESPEECH"),h=e[0];h!==g&&(h.onfocus=h.blur,h.onwebkitspeechchange=function(a){d.find("#MESSAGE").val(e.val()),e.val("")})}function ua(){var a="Offline",b="#"+c+a,d=f("#"+a+"MessageForm");ta(a,b,d),$a.sprite===!0&&f('<link href="'+$a.server+Ua+"templates/"+$a.template+'/styles/sprite.min.css" rel="stylesheet" type="text/css"/>').appendTo("head")}function va(a){if(mb.session!==g&&mb.session.length>0)a=f.extend(a,{SESSION:mb.session});else if(!tb)return;a=f.extend(a,{LANGUAGE:nb.locale}),f.fancybox.showLoading(),a=f.extend(a,{SERVER:$a.server+Ua,JSON:"",RESET:"",EMBED:"",TEMPLATE:$a.template}),f.jsonp({url:$a.server+Va+Wa.offline+"?callback=?&"+f.param(a),data:f.param(a),success:function(a){a.captcha!==g&&($a.security=a.captcha),a.html!==g&&f.fancybox.open({content:a.html,type:"html",fitToView:!0,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1},title:null},padding:0,minWidth:300,width:840,height:551,beforeShow:o,afterShow:ua})}})}function wa(d,e,h,i,j){var k=f(Ya+"Embedded"),l="",m=!1,n=nb.status,o=k.is(".feedback"),p=d?d.is("."+c+"Button"):!1;if(p&&o&&_(!0),o&&!j)return void(k.is(".closed")||k.is(".hidden")?v(!1,!1):w());if(!(mb.session!==g&&mb.session.length>0))return void(k.is(".signup-collapsed")&&(tb=!0,i=f.extend(i,{LANGUAGE:"en",TIME:f.now()}),va(i)));if(i=f.extend(i,{SESSION:mb.session}),d!==g&&nb.templates.length>0){var q=d.attr("class");q!==g&&(l=q.split(" ")[1],(l===g||f.inArray(l,nb.templates)<0)&&(l=""));var r=d.children("img."+c+"Status").attr("src");e=ia(r,"DEPARTMENT")}if($a.template!==g&&$a.template.length>0&&(l=$a.template),i=f.extend(i,{LANGUAGE:nb.locale,TIME:f.now()}),d!==g&&d.attr("class")!==g&&-1!==d.attr("class").indexOf("LiveHelpCallButton")&&(m=!0),$a.embedded&&!m)return $a.department.length>0&&(e=$a.department),"Online"===n||$a.connected?(k=f(Ya+"Embedded"),(k.is(".closed")||k.is(".hidden"))&&v(!1,!0)):""!==nb.offlineRedirect?b.location=nb.offlineRedirect:0!==nb.offlineEmail&&($a.sidebar?Fa():va(i)),!1;if(e!==g&&""!==e&&(-1===f.inArray(e,nb.departments)&&(n="Offline"),i=f.extend(i,{DEPARTMENT:e})),l!==g&&""!==l&&(i=f.extend(i,{TEMPLATE:l})),h||$a.embedded||(h=Wa.home),"Online"!==n)return 0===nb.offlineEmail?""!==nb.offlineRedirect&&(b.location=nb.offlineRedirect):Qa=a.open($a.server+Va+Wa.offline+"?"+f.param(i),c,fb),!1;if(""!==$a.name&&(i=f.extend(i,{NAME:$a.name})),""!==$a.email&&(i=f.extend(i,{EMAIL:$a.email})),Qa=a.open($a.server+Va+h+"?"+f.param(i),c,fb))try{Qa.opener=a}catch(s){}}function xa(){f(Ya+"SignInDetails, "+Ya+"Login #Inputs").hide();var a=f(Ya+"Connecting"),b=a.find(".connecting-container"),c=f(Ya+"Messages .message[data-id!=-1]").length,d="true"===f(Ya+"Embedded").attr("data-initiate");b.length>0&&0===b.find("img").length&&b.prepend('<img src="'+$a.server+Ua+'images/ProgressRing.gif" style="opacity: 0.5"/>'),d||c||a.show()}function ya(a){var d=Ya+"LoginForm",e=f(Ya+"NameInput, "+d+" :input[id=NAME]"),h=f(Ya+"DepartmentInput, "+d+" select[id=DEPARTMENT], "+d+" input[id=DEPARTMENT]"),i=f(Ya+"EmailInput, "+d+" :input[id=EMAIL]"),k=f(Ya+"QuestionInput, "+d+" textarea[id=QUESTION]"),l=f(Ya+"OtherInput, "+d+" :input[id=OTHER]"),m=f(Ya+"Login #Inputs"),n=f(Ya+"Connecting"),o=f.Deferred();if(f(Ya+"Embedded.feedback").length)return o.resolve(),o.promise();var p=a!==g&&a===!1;if($a.connecting=!0,$a.connected&&xa(),$a.department.length>0&&h.val($a.department),h.length>0&&null!==h.val()&&(ob.data.department=h.val(),s()),nb.requireGuestDetails&&!p){var q={name:!0,email:!0,department:!0};if(q.name=ma(e,Ya+"NameError"),nb.loginEmail&&(q.email=oa(i,Ya+"EmailError")),nb.departments.length>0){var r=h.data("collapsed");q.department=ma(h,Ya+"DepartmentError"),r||(h.data("collapsed",!0),h.animate({width:h.width()-35},250))}if(!q.name||!q.email||!q.department)return n.hide(),m.show(),o.resolve(),o.promise()}e=e.length>0?e.val():"",h=h.length>0&&null!==h.val()?h.val():"",i=i.length>0?i.val():"",l=l.length>0?l.val():"",k=k.length>0?k.val():"",e.length>0&&(nb.user=e);var t={NAME:e,EMAIL:i,DEPARTMENT:h,QUESTION:k,OTHER:l,SERVER:b.location.host,JSON:""};return null!==mb.session&&(t=f.extend(t,{SESSION:mb.session})),f.ajax({url:$a.server+Va+Wa.chat,data:f.param(t),success:function(a){if(a.error===g){if(a.session!==g&&a.session.length>0?(f(b).trigger(c+".Connecting",a),f(Ya+"MessageTextarea").removeAttr("disabled"),ob.data.chatEnded=!1,s(),nb.email=a.email,nb.user.length>0&&(nb.user=a.user),null!==mb.session&&(mb.session=a.session,$a.cookie.localStorage?ob.store.set(lb.name,mb.session):Chatstack.cookies.set(lb.name,mb.session,{domain:$a.domain,expires:lb.expires})),Rb.length>0&&0===nb.loginDetails?(Da(Rb[0],function(){Ub(),O()}),Rb=[]):(Ub(),O()),o.resolve(),$a.popup&&(f(Ya+"Login").hide(),f(Ya+"Chat").fadeIn(250),La()),$a.disabled||($a.connected=!0,j("waiting"))):o.resolve(),a.status!==g&&"Offline"===a.status){w();var d=f(Ya+"Embedded");$a.hideOffline===!0?d.fadeOut(250).css("z-index","10000000"):(d.fadeIn(250).css("z-index","5000"),S("Offline",d)),d.find(".CloseButton").fadeOut(250)}Tb()}else $a.connected=!1},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}),o.promise()}function za(){$a.connected=!1,j("disconnected"),ob.data.chatEnded=!0,ob.data.department="",ob.data.lastMessage=0,s(),_a=0,f.ajax({url:$a.server+Va+Wa.signout,data:{SESSION:encodeURIComponent(mb.session)},cache:!1,xhrFields:{withCredentials:!0},success:function(d){$a.popup&&a.close(),f(b).trigger(c+".Disconnect")},error:function(a,b,c){console.log(b)}}),f.fancybox.close()}function Aa(a){a=a===!0?1:0,a!==bb&&(bb=a,f(b).trigger(c+".UpdateTyping",{typing:bb}))}function Ba(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}function Ca(a){return a=Ba(a)}function Da(a,b){var c={MESSAGE:a},d=$a.server+Va+Wa.send,e="MessageTextarea",h=f(Ya+e);mb.session!==g&&mb.session.length>0&&(c=f.extend(c,{SESSION:mb.session}),0===a?f.ajax({url:d,data:f.param(c),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}):(c.JSON="",f.ajax({url:d,data:f.param(c),success:Qb(a,b),dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}}),Aa(!1)),h.val(""),ob.store.set("MessageTextarea",""))}function Ea(){var a="MessageTextarea",b=f(Ya+a),c=b.val(),d="true"===f(Ya+"Embedded").attr("data-initiate");return $a.connected?(""!==c&&Da(c),!1):(ya(!1).done(function(){d&&""!==c&&Da(c)}),d||""===c||(Rb.push(c),b.val(""),ob.store.set("MessageTextarea","")),!1)}function Fa(a){var d=f(Ya+"InitiateChatBubble"),e=f("."+c+"MobileButton");if(d.is(".opened")||a)d.animateCss(vb+"slideOutRight").done(function(){d.removeClass("opened sent"),da(!0)}),e.find(".icon").animateCss(vb+"fadeOut").done(function(){
e.removeClass("opened"),e.find(".icon").removeClass("close")});else{if(""!==nb.offlineRedirect)return void(b.location=nb.offlineRedirect);d.addClass("opened").animateCss(vb+"bounceInRight"),e.removeClass("hidden").addClass("opened"),e.find(".icon").addClass("close").animateCss(vb+"fadeIn"),da()}}function Ga(){var a=f(Ya+"Embedded");if(a.length>0){var d=$a.sidebar&&"Offline"===nb.status;d&&ua(),f(Ya+"Tab, "+Ya+"StatusText, ."+c+"Icon, .OperatorImage, ."+c+"Operator, ."+c+"MobileButton").click(function(b){if($a.embedded=!0,"Online"===nb.status||$a.connected)a.is(".closed")||a.is(".hidden")?(ob.data.notificationEnabled||(ob.data.notificationEnabled=!0),v(!1,!1)):w(),s();else if(d){var e=f("."+c+"MobileButton");if(e.is(".send")){var g=f("#OfflineMessageForm");qa(g,function(){ka(function(a){if(a){var b=f(Ya+"InitiateChatBubble");b.addClass("sent"),b.find("input, textarea").val(""),b.find(".text.content").text(nb.language.thankyoumessagesent),b.find(".sprite.error").removeClass("CrossSmall TickSmall"),da(!0)}else{var c=e.find(".label");c.text(nb.language.retry)}})})}else Fa()}else wa();b.stopPropagation()}),f(Ya+"StatusText, ."+c+"StatusIndicator, ."+c+"Operator, .OperatorImage, ."+c+"CloseButton").hover(function(){f(this).parent().find(Ya+"Tab").addClass("hover"),f("."+c+"StatusIndicator").addClass("hover")},function(){f(this).parent().find(Ya+"Tab").removeClass("hover"),f("."+c+"StatusIndicator").removeClass("hover")}),f(Ya+"CloseButton").click(function(){"Online"===nb.status||$a.connected?f(this).is(".expand")?v(!1,!1):w():wa()}),f(Ya+"CloseBlockedButton").click(function(){w()}),f(Ya+"CollapseButton").click(function(){var a=parseInt(f(Ya+"Body").css("top"),10);86===a?x():z()}),f(Ya+"ContinueEmailInput").on({keypress:function(a){var d=f(this).val();if(13===a.which){var e=oa(this,Ya+"ContinueEmailError");if(d.length>0&&e){var g={SESSION:mb.session,EMAIL:d};nb.email=g.email,f.ajax({url:$a.server+Va+Wa.email,data:f.param(g),success:function(a,d,e){f(Ya+"Continue ."+c+"Input, ."+c.toLowerCase()+"-continue-text").hide(),f(Ya+"Continue .status").text("Thanks!  We will contact you at "+a.email).show(),D(),f(b).trigger("LiveHelp.EmailComplete")},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}return!1}return!0}})}}function Ha(){$a.connected=!1,j("disconnected"),ob.data.chatEnded=!0,ob.data.department="",ob.data.lastMessage=0,s(),_a=0,f(Ya+"SignedIn, "+Ya+"Login #Inputs, "+Ya+"CollapseButton, "+Ya+"Toolbar, "+Ya+"SignInDetails, "+Ya+"Connecting").fadeOut(),f(Ya+"SignIn, "+Ya+"BlockedChatDetails").fadeIn(),f(Ya+"MessageTextarea").attr("disabled","disabled"),f(Ya+"ClosedChatMessage").show();var a=f(Ya+"Login #BlockedChat");a.fadeIn(),0===a.find("img").length&&a.prepend('<img src="'+$a.server+Ua+'images/Block.png"/>')}function Ia(){var a=800;f(b).bind(c+".Connected",function(a,b,c,d,e){$a.accepted=!0,$a.operator={id:b,firstname:c,department:d,hash:e},z(b,c,d,e,!0,!0)}).bind(c+".Disconnect",function(){$a.connected=!1,j("disconnected"),ob.data.chatEnded=!0,ob.data.department="",ob.data.lastMessage=0,s(),f(Ya+"Embedded").removeClass("connected").addClass("completed"),f(Ya+"MessageTextarea").attr("disabled","disabled"),(f(Ya+"SignedIn").is(":visible")||$a.popup)&&P(),f.ajax({url:$a.server+Va+Wa.signout,data:{SESSION:encodeURIComponent(mb.session)},dataType:"jsonp",cache:!1,xhrFields:{withCredentials:!0}})}).bind(c+".BlockChat",function(){Ha()}),f(b).on("click",Ya+"ClosedChatMessage a",function(){var a=f(Ya+"Input");0===nb.loginDetails?(f(Ya+"Body, "+Ya+"Background").css("background-color","#fff"),a.find("textarea").removeAttr("disabled").show(),a.animate({bottom:0,height:"100px"},500)):(f(Ya+"Connecting").hide(),f(Ya+"Body, "+Ya+"Background").css("background-color","#f9f6f6"),f(Ya+"SignIn, "+Ya+"Login #Inputs").show(),f(Ya+"SignedIn").hide(),a.find("textarea, "+Ya+"SmiliesButton, "+Ya+"Typing").show(),a.css({bottom:"-100px",height:"100px"})),f(Ya+"FeedbackRating, "+Ya+"ClosedChatMessage").hide()}),f(Ya+"Toolbar div").hover(function(){f(this).fadeTo(200,1)},function(){f(this).fadeTo(200,.5)}),f(Ya+"SoundToolbarButton").click(function(){ob.data.soundEnabled?ob.data.soundEnabled=!1:ob.data.soundEnabled=!0,s(),B()}),$a.popup&&(a=675),f(Ya+"DisconnectToolbarButton").fancybox({href:Ya+"Disconnect",maxWidth:a,helpers:{overlay:{css:{cursor:"auto"}},title:null},openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",beforeShow:function(){f(Ya+"Embedded").css("z-index",900),f(".bubbletip").css("z-index",950)},afterClose:function(){f(Ya+"Embedded").css("z-index",1e7),f(".bubbletip").css("z-index",9e7)}}),f(b).on("click",Ya+"FeedbackToolbarButton",function(){P()}),f(b).on("click",Ya+"ConnectButton",function(){$a.connecting||ya().done(function(){$a.connecting=!1})}),f(Ya+"DisconnectButton, "+Ya+"CancelButton, "+Ya+"ConnectButton").hover(function(){var a=f(this).attr("id").replace(c,"");f(this).toggleClass(a+" "+a+"Hover")},function(){var a=f(this).attr("id").replace(c,"");f(this).toggleClass(a+" "+a+"Hover")}),f(Ya+"CancelButton").click(function(){f.fancybox.close()}),f(Ya+"DisconnectButton").click(function(){za()}),f(Ya+"SmiliesButton").click(function(a){f(this).bubbletip(f("#SmiliesTooltip"),{calculateOnShow:!0}).open(),a.stopPropagation&&a.stopPropagation()});var d=Ya+"MessageTextarea";f(d).keypress(function(a){return Aa(""!==f(d).val()),13===a.which?(Ea(),!1):!0}).blur(function(){Aa(!1)}).focus(function(){f(Ya+"SmiliesButton").close(),t(),J()}),f(Ya+"Embedded").click(function(){f(Ya+"SmiliesButton").close()}),f(d).keyup(function(a){var b=f(d).val();ob.store.set("MessageTextarea",b)}),f(d).val(ob.store.get("MessageTextarea","")),f("#SmiliesTooltip span").click(function(){var a=f(this).attr("class").replace("sprite ",""),b=f(d).val(),c="";switch(a){case"Laugh":c=":D";break;case"Smile":c=":)";break;case"Sad":c=":(";break;case"Money":c="$)";break;case"Impish":c=":P";break;case"Sweat":c=":\\";break;case"Cool":c="8)";break;case"Frown":c=">:L";break;case"Wink":c=";)";break;case"Surprise":c=":O";break;case"Woo":c="8-)";break;case"Tired":c="X-(";break;case"Shock":c="8-O";break;case"Hysterical":c="xD";break;case"Kissed":c=":-*";break;case"Dizzy":c=":S";break;case"Celebrate":c="+O)";break;case"Angry":c=">:O";break;case"Adore":c="<3";break;case"Sleep":c="zzZ";break;case"Stop":c=":X"}f(Ya+"MessageTextarea").val(b+c)});var e=f(Ya+"MessageSpeech"),h=e[0];h!==g&&(h.onfocus=h.blur,h.onwebkitspeechchange=function(a){f(Ya+"MessageTextarea").val(e.val()),e.val("")})}function Ja(){f(Ya+"DepartmentInput, "+Ya+"LoginForm select[id=DEPARTMENT]").each(function(){var a="collapsed";f(this).data(a)===g&&f(this).data(a,!1)})}function Ka(){var a=Ya+"LoginForm";nb.requireGuestDetails&&(f(Ya+"NameInput, "+a+" input[id=NAME]").bind("keydown blur",function(){ma(this,Ya+"NameError")}),nb.loginEmail&&f(Ya+"EmailInput, "+a+" input[id=EMAIL]").bind("keydown blur",function(){oa(this,Ya+"EmailError")}),nb.departments.length>0&&f(Ya+"DepartmentInput, "+a+" select[id=DEPARTMENT]").bind("keydown keyup blur change",function(){var a=f(this),b=a.data("collapsed");ma(a,Ya+"DepartmentError"),b||(a.animate({width:a.width()-35},250),a.data("collapsed",!0))})),nb.loginEmail||(f(Ya+"EmailInput, "+a+" input[id=EMAIL]").hide(),f("."+c+"Login .EmailLabel").hide()),nb.loginQuestion||(f(Ya+"QuestionInput, "+a+" input[id=QUESTION]").hide(),f("."+c+"Login .QuestionLabel").hide())}function La(){var b=f(a).height(),d=f(a).width(),e=f(Ya+"Campaign").length>0&&!f(Ya+"Campaign").is(":hidden")?f(Ya+"Campaign").width():0,g=f(Ya+"ScrollBorder"),h=f(Ya+"ScrollBorder"),i=f(Ya+"Messages"),j=f(Ya+"MessageTextarea");if(g.length>0&&h.length>0){-1===g.css("width").indexOf("%")&&(f(Ya+"Scroll, "+Ya+"ScrollBorder").css("width","auto"),h.css("width",d-e-40+"px"),i.css("width",d-e-48+"px"),g.css("width",d-e-20+"px")),f(Ya+"Scroll, "+Ya+"ScrollBorder").css("height","auto").css("height",b-175-10+"px"),f(".body").css({width:d+"px","min-width":"625px"}),-1===j.css("width").indexOf("%")&&j.css("width",d-165+"px"),d=g.css("width");var k=parseInt(d,10),l=d.slice(-2);f(Ya+"Messages img, ."+c+"Image, ."+c+"VideoZoom, ."+c+"VideoHover, ."+c+"ImageZoom, ."+c+"ImageHover").not(".noresize").each(function(){var a=parseInt(f(this).css("max-width"),10),b=parseInt(f(this).css("max-height"),10),d=k-50,e=b/a,g=d*e;a>=d&&f(this).css("width",d+l),(b>=g||f(this).is("."+c+"Image"))&&f(this).css("height",g+l)}),D()}}function Ma(){f(a).resize(function(){La()}),f(b).ready(function(){Ja(),$a.connected&&(f(e+"Login").hide(),f(e+"Chat").fadeIn(250),La(),ya())}),Ka(),ua(),"function"==typeof initCallEvents&&initCallEvents(),Oa===g&&(Oa=new buzz.sound($a.server+Ua+"sounds/New Message",{formats:["ogg","mp3","wav"],volume:100}));var d=b.location.pathname.indexOf(Ua+Wa.call)>-1?"Call":"Offline",e="#"+c+d,h=f("#"+d+"MessageForm");sa(e,h)}function Na(a){var b=f(Ya+"Continue"),d=f(Ya+"Messages");nb.email===!1?a!==!1&&b.find("."+c.toLowerCase()+"-continue-text").text(a):(b.find("."+c.toLowerCase()+"-continue-text").text("Hmm looks like there was no response.  We will reply via email shortly."),b.find("."+c+"Input").hide(),nb.email!==g&&b.find(".status").text("We will contact you at "+nb.email).show()),d.find(Ya+"Continue").length||(f(b).appendTo(d).show().attr("data-datetime",Date.now()/1e3|0),D())}var Oa,Pa,Qa,Ra,Sa,Ta="https:"===b.location.protocol?"https://":"http://",Ua="/livehelp/",Va="/livehelp/",Wa={home:"index.php",settings:"settings.php",visitor:"visitor.php",offline:"offline.php",security:"security.php",image:"image.php",chat:"chat.php",call:"call.php",signout:"logout.php",messages:"messages.php",send:"send.php",email:"email.php",rating:"rate.php",feedback:"feedback.php"},Xa="undefined"!=typeof d?d.server:b.location.host+b.location.pathname.substring(0,b.location.pathname.indexOf(Ua)),Ya="#"+c,Za=navigator.language||navigator.userLanguage,$a={protocol:Ta,server:Ta+Xa+Ua,domain:b.location.hostname.replace("www.",""),department:"",template:"default",sprite:!0,locale:Za.toLowerCase(),embedded:!0,initiate:!0,initiateDelay:0,fonts:!0,session:"",security:"",popup:!1,visitorTracking:null,visitorRefresh:15e3,plugin:"",name:"",custom:"",email:"",connecting:!1,connected:!1,hideOffline:!1,chatBubbles:!1,messageBubbles:!0,personalised:!1,offline:!1,accepted:!1,promptPrechatDelay:250,theme:"green",feedback:!1,feedbackDelay:-1,sidebar:!1,hidden:!1,cookie:{localStorage:!1},disabled:!1,operator:!1},_a=0,ab=0,bb=0,cb="",db="",eb={left:0,top:0},fb="",gb="",hb=!1,ib=0,jb=f.now(),kb=d.account!==g&&36===d.account.length,lb={name:kb?"LiveHelp-"+d.account:c+"Session"},mb={session:Chatstack.cookies.get(lb.name)},nb={user:"Guest",departments:[],visitorTracking:!0,locale:"en",language:{copyright:"Copyright &copy; "+(new Date).getFullYear(),online:"Online",offline:"Offline",brb:"Be Right Back",away:"Away",contactus:"Contact Us"}},ob={store:!1,data:{tabOpen:!1,operatorDetailsOpen:!1,soundEnabled:!0,notificationEnabled:!0,chatEnded:!1,department:"",messages:0,lastMessage:0,feedbackOpen:!0}},pb={},qb=!1,rb=[],sb=!0,tb=!1,ub={},vb="chatstack-";f.fn.extend({animateCss:function(a){var b="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c=f.Deferred();return this.addClass("animated "+a).one(b,function(){f(this).removeClass("animated "+a),c.resolve()}),c.promise()}}),ob.store=new h,Chatstack.cookie!==g&&Chatstack.cookie.localStorage&&(mb.session=null!==ob.store.get(lb.name)?ob.store.get(lb.name):g),Date.now||(Date.now=function(){return(new Date).getTime()}),f(b).on("click","."+c+"Button",function(){return wa(f(this),!1,!1,!1,!0),!1}),f(b).on("click","."+c+"CallButton",function(){return wa(f(this),"",Wa.call),!1}),f(b).on("click","."+c+"OfflineButton",function(){return va(),!1}),f.preloadImages=function(){for(var a=0;a<arguments.length;a++)f("<img>").attr("src",arguments[a])},l();var wb=Intercom.getInstance(),xb={origin:wb.origin,timer:!1,master:!0,time:(new Date).getTime()},yb=e.sortedIndex(rb,xb,"time");"undefined"!=typeof a&&null!==a&&(a.addEventListener?a.addEventListener("beforeunload",m):a.attachEvent&&a.attachEvent("onbeforeunload",m)),wb.on("ready",function(b){if(b.origin!==wb.origin){$a.visitorTracking=!1,sb=!1;var c=e.findWhere(rb,{origin:b.origin});if(c===g){e.each(rb,function(a,b,c){a.master=!1});var d={origin:b.origin,timer:!1,master:!0,time:b.time},f=e.sortedIndex(rb,d,"time");rb.splice(f,0,d)}else c.timer!==!1&&(a.clearTimeout(c.timer),c.timer=!1),c.master=!0}}),wb.on("ping",function(a){a.origin!==wb.origin&&(n(a),wb.emit("pong",{origin:wb.origin,master:sb,time:xb.time}))}),wb.on("pong",function(a){a.origin!==wb.origin&&n(a)}),wb.on("master",function(a){if(a.origin===wb.origin){var b=e.findWhere(rb,{origin:a.origin});b!==g&&(b.master=!0),$a.visitorTracking=!0,sb=!0}}),wb.on("close",function(a){if(a.origin!==wb.origin&&(rb=e.reject(rb,function(b){return b.origin===a.origin}),rb.length>0&&a.master)){var b=e.where(rb,{master:!1}),c=b[b.length-1];c!==g&&wb.emit("master",{origin:c.origin})}});var zb=e.throttle(function(){sb&&wb.emit("ping",{origin:wb.origin,master:sb}),f.each(rb,function(b,c){var d=e.findWhere(rb,{origin:c.origin});d.timer===!1&&c.origin!==wb.origin&&(d.timer=a.setTimeout(function(){rb=e.reject(rb,function(a){return a.origin===c.origin}),d.timer=!1},15e3))})},7500);rb.splice(yb,0,xb),wb.emit("ready",xb),function Vb(){sb&&zb();var b=rb[rb.length-1];xb.time<b.time&&sb===!0&&($a.visitorTracking=!1,sb=!1),1!==rb.length||b.origin!==xb.origin||sb||($a.visitorTracking=!0,sb=!0),a.setTimeout(Vb,7500)}();var Ab=e.once(function(a){mb.session=a,$a.cookie.localStorage?ob.store.set(lb.name,a):Chatstack.cookies.set(lb.name,a,{domain:$a.domain,expires:lb.expires})}),Bb=e.once(function(){f(a).bind("storage",function(a){C()})}),Cb=e.once(function(){var a="";if(a.length>0){var c='<style type="text/css">'+a+"</style>";f(c).appendTo(b.head)}}),Db=e.once(function(){var a=f(Ya+"Embedded");return a.length&&(a.is(".signup")||$a.popup)&&("Online"===nb.status||$a.connected)?void v(!1,!1):void(ob.data===g||ob.data.tabOpen===g||ob.data.tabOpen!==!0||"Online"!==nb.status&&!$a.connected?w():v(!1,!1))}),Eb=function(a){return function(b){f(".flex[data-id="+a+"] .fancybox").click()}},Fb=function(b){return function(d){var e="",h=f(Ya+"Messages").width(),i=h-50,j=[25,25,25,25];if(this.width>i){var k=i/this.width,l=this.height*k;e='<div class="'+c+'Image" style="position:relative; max-width:'+this.width+"px; max-height:"+this.height+"px; height:"+l+"px; min-width:"+(i+8)+'px; margin:5px"><div class="'+c+'ImageZoom" style="position:absolute; opacity:0.5; top:0px; z-index:150; background:url('+$a.server+Ua+"images/Magnify.png) center center no-repeat; max-width:"+this.width+"px; max-height:"+this.height+"px; width:"+i+"px; height:"+l+'px"></div><div class="'+c+'ImageHover" style="position:absolute; top:0px; z-index:100; background:#fff; opacity:0.25; max-width:'+this.width+"px; max-height:"+this.height+"px; width:"+i+"px; height:"+l+'px"></div><div style="position:absolute; top:0px;"><a href="'+this.src+'" class="fancybox"><img src="'+this.src+'" alt="Received Image" style="width:'+i+"px; max-width:"+this.width+"px; max-height:"+this.height+'px"></a></div>'}else e='<img src="'+this.src+'" alt="Received Image" style="max-width:'+this.width+'px; margin:5px">';f(".flex[data-id="+b+"] .message").append(e),e="",D(),$a.popup||(j=[25,405,25,25]),f(".flex[data-id="+b+"] .fancybox").fancybox({openEffect:"elastic",openEasing:"swing",closeEffect:"elastic",closeEasing:"swing",margin:j}),f("."+c+"ImageZoom").hover(function(){f("."+c+"ImageHover").fadeTo(250,0),f(this).fadeTo(250,1)},function(){f("."+c+"ImageHover").fadeTo(250,.25),f(this).fadeTo(250,.75)}),f(".flex[data-id="+b+"] ."+c+"ImageZoom").click(Eb(b)),Oa!==g&&ob.data.soundEnabled&&ob.data.notificationEnabled&&Oa.play(),a.focus()}},Gb=!1,Hb=!1;M();var Ib=!1,Jb=function(a){return function(b){var c=f(Ya+"Embedded"),d=f(Ya+"InitiateChatBubble"),e=d.is(".offline");return a&&(b&&b.stopPropagation(),e||X("Declined")),e&&a?void Fa():c.is(".feedback")||a?void _():void(e||($a.embedded?d.fadeOut(150,function(){Z(),d.removeClass("opened")}):(d.fadeOut(150),wa(),X("Opened"))))}},Kb=e.once(function(){var a=f(Ya+"InitiateChatBubble");aa(a)}),Lb=e.once(function(a){mb.session=a,$a.cookie.localStorage?ob.store.set(lb.name,a):Chatstack.cookies.set(lb.name,a,{domain:$a.domain,expires:lb.expires})}),Mb=e.throttle(ha,$a.visitorRefresh),Nb=e.once(ha),Ob=e.debounce(function(){jb=f.now()},500);f(b).on("mousemove",Ob);var Pb=e.once(function(a){$a.cookie.localStorage?ob.store.set(lb.name,a):Chatstack.cookies.set(lb.name,a,{domain:$a.domain,expires:lb.expires})}),Qb=function(a,b){return function(c,d,e){if(null!==c&&""!==c&&c.id!==g&&0===f(".flex[data-id="+c.id+"]").length){var h="message",i=15,j="#666";$a.messageBubbles&&(h+=" bubble right",i=0,j="#000"),c.datetime||(c.datetime=Date.now()/1e3|0);var k='<div class="flex right" data-id="'+c.id+'" data-datetime="'+c.datetime+'"><div class="'+h+'" align="left" style="color:#666">',l=nb.user.length>0?nb.user:"Guest";$a.messageBubbles||(k+=Ca(l)+" "+nb.language.says+":<br/>");var m=Ca(a);m.length&&(Gb=!1,m=G(m),k+='<div style="margin: 0 0 0 '+i+"px; color: "+j+'">'+m+"</div></div></div>",f(Ya+"Messages").append(k),A(),D()),b&&b()}}},Rb=[];a.isActive=!0,f(a).focus(function(){this.isActive=!0,J()}),f(a).blur(function(){this.isActive=!1}),Chatstack.iframe()&&($a.disabled=!0),o();var Sb=e.once(function(){Q(),$a.popup&&Ma(),f(b).trigger(c+".StatusModeChanged",nb.status);var d=f(Ya+"Embedded");if(d.length&&$a.embedded===!0){nb.language.copyright.length>0?"block":"none",nb.rtl===!0?'dir="rtl"':"",nb.rtl===!0?'style="text-align:right"':"";if($a.fonts&&nb.fonts){nb.fonts=nb.fonts.replace(/\.\.\/\.\.\/\.\.\//g,$a.server+"/livehelp/");var h='<style type="text/css">'+nb.fonts+"</style>";f(h).appendTo(b.head)}var i=nb.styles;if(i.length>0){i=i.replace(/\.\.\/\.\.\/\.\.\//g,$a.server+"/livehelp/");var j='<style type="text/css">'+i+"</style>";f(j).appendTo(b.head)}if(d){if(nb.sidebar&&($a.sidebar=!0),$a.sidebar){if(d.addClass("sidebar"),nb.images.logo&&nb.images.logo.length){var k=d.find(Ya+"Logo");f('<img src="'+nb.images.logo+'"/>').appendTo(k),d.addClass("logo")}if($a.popup&&nb.campaign.image&&nb.campaign.image.length){var m=d.find(Ya+"Campaign");f('<a href="'+nb.campaign.link+'" target="_blank"><img src="'+nb.campaign.image+'" border="0" class="LiveHelpCampaignImage"/></a>').appendTo(m),d.find(Ya+"Scroll").addClass("campaign")}}$a.popup||!$a.hidden&&!$a.disabled||d.addClass("hidden").removeClass("closed"),$a.popup&&("Online"===nb.status||$a.connected?d.addClass("opened").removeClass("closed"):d.addClass("hidden"));var n=-1,o=e.debounce(function(){var a=f(Ya+"Embedded").height();n!==a&&(n=a,D())},250);f(a).on("resize",o)}f(Ya+"Embedded input, "+Ya+"Embedded textarea").placeholder();var q={"default":{tab:"#dddedf",theme:"dark"},green:{tab:"#26c281",theme:"light"},turquoise:{tab:"#31cbbb",theme:"light"},blue:{tab:"#3498db",theme:"light"},purple:{tab:"#8e44ad",theme:"light"},pink:{tab:"#db0a5b",theme:"light"},orange:{tab:"#f5ab35",theme:"light"}};if(nb.theme&&($a.theme=nb.theme),"light"!==$a.theme&&"dark"!==$a.theme&&q[$a.theme]!==g){var r=q[$a.theme];f(Ya+"Tab, ."+c+"MobileButton").css("background-color",r.tab),$a.theme=r.theme}if($a.theme!==g&&"light"===$a.theme&&f(Ya+"CloseButton, "+Ya+"StatusText, ."+c+"MobileButton").addClass("light"),nb.images.button){var t=f("."+c+"MobileButton"),u="image-custom";nb.images.button.indexOf("http://")>-1||nb.images.button.indexOf("https://")>-1?t.css("background-image",'url("'+nb.images.button+'")'):u="image-"+nb.images.button,$a.sidebar&&(u+=" sidebar"),t.addClass(u)}$a.colors!==g&&$a.colors.tab!==g&&$a.colors.tab.normal!==g&&(f(Ya+"Tab, ."+c+"MobileButton").css("background-color",$a.colors.tab.normal),$a.colors.tab.hover!==g&&f(Ya+"Tab, ."+c+"MobileButton").hover(function(){f(this).css("background-color",$a.colors.tab.hover)},function(){f(this).css("background-color",$a.colors.tab.normal)})),f.each(nb.language,function(a,b){var c=f(Ya+'Embedded [data-lang-key="'+a+'"]');c.length>0&&c.text(b)}),Ga(),Ka(),Ia();var x=$a.server+Va+Wa.image+"?override=true&size=150&round=true";$a.account!==g&&(x=$a.server+Va+Wa.image+"/round/default/150px/");var y=nb.embeddedinitiate;if(y!==g&&y.id>0&&y.photo&&($a.chatBubbles=!0),$a.chatBubbles){y.id>0&&z(y.id,y.name,y.department,y.avatar);var A=f(Ya+"Embedded ."+c+"Operator");f(Ya+"StatusText").css("left","70px"),A.find(".OperatorImage").show(),A.show()}if(f(Ya+"SwitchPopupToolbarButton").click(function(){$a.embedded=!1,w(function(){ob.data.notificationEnabled=!1,s()}),wa(f(this))}),C(),p(nb.departments),mb.session!==g&&mb.session.length>0)if("Online"===nb.status)if($a.connected)ob.data.tabOpen&&v(!1,!1);else{var B=f(Ya+"InitiateChatBubble").is(":visible");if(d.is(":hidden")){if(f(Ya+"Waiting").hide(),!(B||nb.initiate.enabled&&$a.initiateDelay)){d.is(".sidebar")||d.fadeIn(50);var E="show";$a.disabled&&(E+=" hidden"),f("."+c+"MobileButton").removeClass("hide").addClass(E)}C()}}else $a.connected&&ob.data.tabOpen&&v(!1,!1);var F=Ya+"LoginForm",G=f(Ya+"NameInput, "+F+" :input[id=NAME]"),H=f(Ya+"EmailInput, "+F+" :input[id=EMAIL]"),I=f(Ya+"SignIn").find("input, textarea");$a.name!==g&&$a.name.length>0&&(G.val($a.name),nb.requireGuestDetails&&ma(G,Ya+"NameError")),$a.email!==g&&$a.email.length>0&&(H.val($a.email),nb.requireGuestDetails&&oa(H,Ya+"EmailError")),nb.requireGuestDetails||I.css("width","100%"),$a.connected&&O(),nb.status!==g&&nb.status.length>0&&V(nb.status,nb.departments),l()}});f(b).bind(c+".SettingsUpdated",function(){Sb()}),f(b).bind(c+".StatusModeUpdated",function(a,b){var c=b.data;nb.departments=c.departments,V(c.status,nb.departments)}),f(b).bind(c+".WebSocketStateChanged",function(a,b){qb=b.connected,pb.websockets!==g&&pb.websockets.enabled===!0?("established"!==pb.websockets.state&&"established"===b.state||"error"!==pb.websockets.state&&"error"===b.state)&&(pb.websockets.state=b.state,Nb()):Mb()}),f(b).bind(c+".UpdateMessages",function(a,b){b!==g&&(b.status===g?b.status=0:b.status>0&&Tb()),$a.accepted=!0,M()});var Tb=e.debounce(function(){Na(!1)},9e4),Ub=e.debounce(function(){$a.accepted||Na(!1)},$a.promptPrechatDelay);f(b).bind(c+".MessageReceived",function(a,b){b.align===g&&(b.align=1),b.status===g&&(b.status=0),b.status>0&&Tb(),L([b])}),f(b).ready(function(){if(cb=f(b).attr("title"),j("idle"),k("idle"),$a.fonts){var c='<link href="'+$a.protocol+'fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>';f(c).appendTo("head")}f(this).click(function(){J()}),nb!==g&&nb.status!==g&&Sb(),l(),$a.popup&&La(),"undefined"!=typeof resetPosition&&f(a).bind("resize",resetPosition),f(b).on("LiveHelp.OpenLiveHelp",function(){wa()}),f(b).on("LiveHelp.OpenInitiateChatTab",function(){Z()}),f(b).on("LiveHelp.SendMessage",function(a,b){console.log("LiveHelp.SendMessage Trigger")}),f(b).on("LiveHelp.DisplayMessage",function(a,b){console.log("LiveHelp.DisplayMessage Trigger"),console.log(b)}),"onhashchange"in a&&f(a).on("hashchange",function(){ha(!0,!0)}),Chatstack.openChat=function(){wa()},Chatstack.closeChat=function(){w()},Chatstack.disconnectChat=function(){"connected"===Chatstack.chatState&&za()},Chatstack.openInitiateChat=function(){ga(!0,!0)},Chatstack.closeInitiateChat=function(){Jb(!0)()}})}(this,document,"LiveHelp",Chatstack,Chatstack._,jQuery);